import{N as U,x as w,P as B,Q as I,W as N,c as a,S as t,a8 as T,ab as q,a5 as A,a7 as E,a2 as d,V as $,T as m,U as u,ae as j,a0 as e,af as c}from"./index-D-j42ziH.js";import{a as z,c as p,g as D,u as G,b as f}from"./vee-validate.esm-STRXnF5i.js";import{v as y}from"./index-7pmf-ZMF.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Q}from"./VDivider-C-0_hfi6.js";import{V as R}from"./VForm-B0joBIqd.js";const W={class:"register-page"},H={class:"text-center mb-4"},J={class:"d-flex flex-column align-center"},K={class:"text-center"},L={class:"text-center"},X={__name:"register",setup(Y){const{api:h}=q(),k=A(),x=U(),C=z({email:p().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",r=>y.isEmail(r)),username:p().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>y.isAlphanumeric(r)),password:p().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:p().oneOf([D("password")],"密碼不一致")}),{handleSubmit:P,isSubmitting:_}=G({validationSchema:C}),g=f("email"),v=f("username"),b=f("password"),V=f("passwordConfirm"),l=w(!1),n=w(!1),S=()=>{l.value=!l.value},F=()=>{n.value=!n.value},M=P(async r=>{var o,i;try{await h.post("/user",{email:r.email,username:r.username,password:r.password}),x({text:"註冊成功",snackbarProps:{color:"green"}}),k.push("/")}catch(s){console.log(s),x({text:((i=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,o)=>{const i=B("router-link");return I(),N("div",W,[a(T,{class:"register-card",style:{"margin-top":"46px"}},{default:t(()=>[a(E,{class:"card-content px-8 py-4"},{default:t(()=>[d("div",H,[a(i,{to:"/"},{default:t(()=>[a($,{class:"mx-auto",width:80,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1})]),d("div",J,[a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"mb-2 elevation-1 w-66",variant:"plain",to:"/login"},{default:t(()=>[u(" 使用 Google 註冊 ")]),_:1}),a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000",size:"default","prepend-icon":"mdi-facebook",class:"mb-4 elevation-1 w-66",variant:"plain",to:"/login"},{default:t(()=>[u(" 使用 Facebook 註冊 ")]),_:1})]),a(Q,{class:"mb-4"}),a(R,{onSubmit:j(e(M),["prevent"]),disabled:e(_)},{default:t(()=>[a(c,{label:"信箱",type:"email",modelValue:e(g).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value,class:"mb-2"},null,8,["modelValue","error-messages"]),a(c,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value,class:"mb-2"},null,8,["modelValue","error-messages"]),a(c,{label:"密碼",type:l.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(b).value.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,"append-inner-icon":l.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":S,class:"mb-2"},null,8,["type","modelValue","error-messages","append-inner-icon"]),a(c,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(V).value.value,"onUpdate:modelValue":o[3]||(o[3]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":F,class:"mb-4"},null,8,["type","modelValue","error-messages","append-inner-icon"]),d("div",K,[a(m,{type:"submit",outlined:"",border:"",color:"#000000",class:"register-btn mb-3 w-33",variant:"solo",loading:e(_)},{default:t(()=>[u(" 註冊 ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"]),d("div",L,[a(m,{ripple:!1,variant:"plain",to:"/login"},{default:t(()=>[u(" 登入 ")]),_:1})])]),_:1})]),_:1})])}}},te=O(X,[["__scopeId","data-v-44d53903"]]);export{te as default};
