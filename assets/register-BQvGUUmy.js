import{N as U,x as w,Q as B,R as I,X as N,c as a,T as l,a7 as T,ac as q,P as A,a8 as E,a4 as d,V as $,U as m,W as u,ap as j,a1 as e,ad as c}from"./index-D7Ak4P4d.js";import{c as R,b as p,g as z,u as D,f,V as G}from"./vee-validate.esm-n0mYqsAE.js";import{v as y}from"./index-B-N9A1X1.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Q}from"./VDivider-C137Yh-_.js";const W={class:"register-page"},X={class:"text-center mb-4"},H={class:"d-flex flex-column align-center"},J={class:"text-center"},K={class:"text-center"},L={__name:"register",setup(Y){const{api:h}=q(),k=A(),x=U(),C=R({email:p().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",r=>y.isEmail(r)),username:p().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>y.isAlphanumeric(r)),password:p().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:p().oneOf([z("password")],"密碼不一致")}),{handleSubmit:P,isSubmitting:_}=D({validationSchema:C}),g=f("email"),v=f("username"),b=f("password"),V=f("passwordConfirm"),t=w(!1),n=w(!1),S=()=>{t.value=!t.value},F=()=>{n.value=!n.value},M=P(async r=>{var o,i;try{await h.post("/user",{email:r.email,username:r.username,password:r.password}),x({text:"註冊成功",snackbarProps:{color:"green"}}),k.push("/")}catch(s){console.log(s),x({text:((i=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,o)=>{const i=B("router-link");return I(),N("div",W,[a(T,{class:"register-card",style:{"margin-top":"46px"}},{default:l(()=>[a(E,{class:"card-content px-8 py-4"},{default:l(()=>[d("div",X,[a(i,{to:"/"},{default:l(()=>[a($,{class:"mx-auto",width:80,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1})]),d("div",H,[a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"mb-2 elevation-1 w-66",variant:"plain",to:"/login"},{default:l(()=>[u(" 使用 Google 註冊 ")]),_:1}),a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000",size:"default","prepend-icon":"mdi-facebook",class:"mb-4 elevation-1 w-66",variant:"plain",to:"/login"},{default:l(()=>[u(" 使用 Facebook 註冊 ")]),_:1})]),a(Q,{class:"mb-4"}),a(G,{onSubmit:j(e(M),["prevent"]),disabled:e(_)},{default:l(()=>[a(c,{label:"信箱",type:"email",modelValue:e(g).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value,class:"mb-2"},null,8,["modelValue","error-messages"]),a(c,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value,class:"mb-2"},null,8,["modelValue","error-messages"]),a(c,{label:"密碼",type:t.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(b).value.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,"append-inner-icon":t.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":S,class:"mb-2"},null,8,["type","modelValue","error-messages","append-inner-icon"]),a(c,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(V).value.value,"onUpdate:modelValue":o[3]||(o[3]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":F,class:"mb-4"},null,8,["type","modelValue","error-messages","append-inner-icon"]),d("div",J,[a(m,{type:"submit",outlined:"",border:"",color:"#000000",class:"register-btn mb-3 w-33",variant:"solo",loading:e(_)},{default:l(()=>[u(" 註冊 ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"]),d("div",K,[a(m,{ripple:!1,variant:"plain",to:"/login"},{default:l(()=>[u(" 登入 ")]),_:1})])]),_:1})]),_:1})])}}},re=O(L,[["__scopeId","data-v-44d53903"]]);export{re as default};
