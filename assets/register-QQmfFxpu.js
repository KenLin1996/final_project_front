import{N as M,x as _,Q as U,R as B,X as I,c as a,T as r,a7 as N,ac as T,P as q,a8 as E,a4 as d,V as $,U as m,W as u,ap as j,a1 as e,ad as c}from"./index-BiU6_x0i.js";import{c as R,b as p,g as z,u as A,f,V as D}from"./vee-validate.esm-Co8z-nHt.js";import{v as G}from"./index-Br0axvf4.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Q}from"./VDivider-CPhV-GDD.js";const W={class:"register-page"},X={class:"text-center mb-4"},H={class:"d-flex flex-column align-center"},J={class:"text-center"},K={class:"text-center"},L={__name:"register",setup(Y){const{api:y}=T(),h=q(),V=M(),k=R({email:p().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",t=>G.isEmail(t)),username:p().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符"),password:p().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:p().oneOf([z("password")],"密碼不一致")}),{handleSubmit:C,isSubmitting:x}=A({validationSchema:k}),g=f("email"),v=f("username"),b=f("password"),w=f("passwordConfirm"),l=_(!1),n=_(!1),P=()=>{l.value=!l.value},S=()=>{n.value=!n.value},F=C(async t=>{var o,i;try{await y.post("/user",{email:t.email,username:t.username,password:t.password}),V({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(s){console.log(s),V({text:((i=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(t,o)=>{const i=U("router-link");return B(),I("div",W,[a(N,{class:"register-card",style:{"margin-top":"46px"}},{default:r(()=>[a(E,{class:"card-content px-8 py-4"},{default:r(()=>[d("div",X,[a(i,{to:"/"},{default:r(()=>[a($,{class:"mx-auto",width:80,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1})]),d("div",H,[a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"mb-2 elevation-1 w-66",variant:"plain",to:"/login"},{default:r(()=>[u(" 使用 Google 註冊 ")]),_:1}),a(m,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000",size:"default","prepend-icon":"mdi-facebook",class:"mb-4 elevation-1 w-66",variant:"plain",to:"/login"},{default:r(()=>[u(" 使用 Facebook 註冊 ")]),_:1})]),a(Q,{class:"mb-4"}),a(D,{onSubmit:j(e(F),["prevent"]),disabled:e(x)},{default:r(()=>[a(c,{label:"信箱",type:"email",modelValue:e(g).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value,class:"mb-2",autocomplete:"email"},null,8,["modelValue","error-messages"]),a(c,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value,class:"mb-2",autocomplete:"username"},null,8,["modelValue","error-messages"]),a(c,{label:"密碼",type:l.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(b).value.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,"append-inner-icon":l.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":P,class:"mb-2",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),a(c,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(w).value.value,"onUpdate:modelValue":o[3]||(o[3]=s=>e(w).value.value=s),"error-messages":e(w).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":S,class:"mb-4",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),d("div",J,[a(m,{type:"submit",outlined:"",border:"",class:"register-btn mb-3 w-33",loading:e(x)},{default:r(()=>[u(" 註冊 ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"]),d("div",K,[a(m,{ripple:!1,variant:"plain",to:"/login"},{default:r(()=>[u(" 登入 ")]),_:1})])]),_:1})]),_:1})])}}},re=O(L,[["__scopeId","data-v-fa1b4d55"]]);export{re as default};
