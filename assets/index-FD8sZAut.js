import{P as rt,Q as u,R as P,S as t,c as e,a5 as le,a6 as Z,U as f,Z as p,V as ut,a2 as c,a7 as ne,a8 as ct,M as re,N as Ae,x as k,a9 as Ce,o as M,z as pe,W as N,a0 as o,_ as fe,T,G as oe,X as z,Y as O,aa as me,ab as Te,$ as Le,ac as ze,ad as Ve,ae as Be,af as De,ag as Re,A as Fe,ah as Ue,a1 as se,a3 as it,ai as Pe}from"./index-8Uiqhuyy.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as dt}from"./VChip-BE6El_NJ.js";import{c as qe,a as we,u as He,b as ke}from"./vee-validate.esm-B_JmCUxn.js";import{V as pt}from"./VMenu-BqWCkneE.js";import{V as Oe,a as Ge,b as Ye}from"./VList-BwhdeaOv.js";import{V as Qe}from"./VForm-Bfo4Hgj4.js";import{V as Xe}from"./VTextarea-DOhRxgbA.js";import{V as ft,a as mt,b as We,c as ht}from"./VExpansionPanels-DOgCfqGa.js";import{V as B,a as g}from"./VRow-CNdGgXlO.js";import{V as te}from"./VContainer-CSikmqFk.js";import{V as ae}from"./VDivider-CwA7EXwJ.js";import"./VSlideGroup-B78MCx7J.js";const gt={class:"d-flex justify-space-between align-center my-1"},_t={__name:"BookCard",props:["_id","image","title","category","mainAuthor","content","chapterName"],setup(n){return(x,v)=>{const i=rt("router-link");return u(),P(i,{to:"/stories/"+n._id,style:{"text-decoration":"none"}},{default:t(()=>[e(le,{class:"pa-3 customMargin h-100 me-2",width:"220"},{default:t(()=>[e(Z,{class:"pa-0 mb-1 cursor-pointer",style:{"font-size":"12px",color:"#4e9194"}},{default:t(()=>{var y;return[f(p((y=n.mainAuthor)==null?void 0:y.username),1)]}),_:1}),e(ut,{class:"cursor-pointer",height:"150px",src:n.image,cover:""},null,8,["src"]),c("div",gt,[e(ne,{class:"pa-0 text-subtitle-1 cursor-pointer",style:{width:"130px"}},{default:t(()=>[f(p(n.title),1)]),_:1}),e(dt,{density:"compact",color:"primary",label:"",style:{"font-size":"12px",padding:"2px 6px"}},{default:t(()=>[f(p(n.category),1)]),_:1})]),e(ct,{class:"pa-0"},{default:t(()=>[f(p(n.content[n.content.length-1].chapterName),1)]),_:1}),e(Z,{class:"pa-0 ellipsis-3-lines"},{default:t(()=>[f(p(n.content[0].content[0]),1)]),_:1})]),_:1})]),_:1},8,["to"])}}},je=Se(_t,[["__scopeId","data-v-f88c67e9"]]);function vt(n){return{all:n=n||new Map,on:function(x,v){var i=n.get(x);i?i.push(v):n.set(x,[v])},off:function(x,v){var i=n.get(x);i&&(v?i.splice(i.indexOf(v)>>>0,1):n.set(x,[]))},emit:function(x,v){var i=n.get(x);i&&i.slice().map(function(y){y(v)}),(i=n.get("*"))&&i.slice().map(function(y){y(x,v)})}}}const he=vt(),xt=n=>(Be("data-v-86b721a5"),n=n(),De(),n),yt={class:"title-row"},bt={class:"title-text"},Ct={class:"card-title my-1"},wt={class:"vote-section"},kt={class:"vote-count text-body-2"},Vt=xt(()=>c("span",{class:"headline"},"檢舉故事",-1)),St={__name:"VoteItem",props:["content","chapterName","author","voteCount","storyId","extensionId","voteStatus","authorId"],setup(n){const{apiAuth:x}=Ve(),v=re(),i=re(),y=Ae(),J=k(!1),C=n,{content:W,author:D,voteStatus:V,voteCount:b,storyId:l,extensionId:R}=Ce(C),A=v.userId,G=M(()=>b.value.includes(A)),E=async w=>{if(!i.isLogin){y({text:"請先登入才能投票",snackbarProps:{color:"red"}});return}try{(await x.patch(`/story/${l.value}/${R.value}`,{voteCountChange:w})).data.hasVotedInOtherExtension||(J.value=!0),he.emit("updateStory")}catch(m){console.log(m),console.error("Error updating vote count:",m)}},Y=qe({report:we().required("請描述檢舉原因").min(50,"檢舉不能低於 50 字")}),{handleSubmit:r,isSubmitting:S,resetForm:q}=He({validationSchema:Y,initialValues:{report:""}}),H=ke("report"),$=k(!1),ge=()=>{$.value=!0},ce=M(()=>{const w=[{title:"檢舉",action:ge}];return A===C.authorId&&w.push({title:"刪除",action:ve}),w}),_e=r(async w=>{if(!i.isLogin){y({text:"請先登入才能檢舉",snackbarProps:{color:"red"}});return}try{console.log("檢舉已提交"),$.value=!1}catch(m){console.log(m)}}),ve=async()=>{var w,m;try{await x.delete(`/story/${l.value}/${R.value}/deleteExtensionStory`),y({text:"刪除成功",snackbarProps:{color:"green"}}),he.emit("updateStory")}catch(h){console.log(h),y({text:((m=(w=h==null?void 0:h.response)==null?void 0:w.data)==null?void 0:m.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return pe($,w=>{w||q()}),(w,m)=>(u(),N(z,null,[e(le,{class:"w-100 px-6 py-2 rounded-lg",style:{border:"1px solid #48a9a6",margin:"16px 0px"}},{default:t(()=>[e(ne,{class:"pa-0"},{default:t(()=>{var h;return[c("div",yt,[c("div",bt,[c("h1",Ct,p((h=o(D))==null?void 0:h.username),1)]),c("div",wt,[e(fe,{class:"vote-icon",size:"20"},{default:t(()=>[f("mdi-vote")]),_:1}),c("span",kt,p(n.voteCount.length),1),e(pt,{location:"end"},{activator:t(({props:F})=>[e(T,oe({icon:""},F,{class:"menu-btn",style:{width:"30px",height:"30px",padding:"auto"},variant:"plain"}),{default:t(()=>[e(fe,{size:"20"},{default:t(()=>[f("mdi-dots-vertical")]),_:1})]),_:2},1040)]),default:t(()=>[e(Oe,{class:"pa-0"},{default:t(()=>[(u(!0),N(z,null,O(o(ce),(F,Q)=>(u(),P(Ge,{class:"px-4 py-1 my-0",key:Q,onClick:xe=>F.action?F.action():null,link:""},{default:t(()=>[e(Ye,null,{default:t(()=>[f(p(F.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])]}),_:1}),e(Z,{class:"pa-0 mx-7 py-1"},{default:t(()=>{var h;return[f(p((h=o(W))==null?void 0:h[0].latestContent),1)]}),_:1}),e(me,{class:"d-flex justify-end"},{default:t(()=>[e(T,{disabled:o(G)||o(V).hasVoted,style:{"background-color":"#f24e1e",color:"white"},onClick:m[0]||(m[0]=h=>E(1))},{default:t(()=>[f("投票")]),_:1},8,["disabled"]),e(T,{disabled:!o(G)||o(V).hasVoted&&!o(V).voteThis,style:{"background-color":"#f4b942",color:"black","margin-right":"24px"},onClick:m[1]||(m[1]=h=>E(-1))},{default:t(()=>[f("取消")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(ze,{modelValue:$.value,"onUpdate:modelValue":m[4]||(m[4]=h=>$.value=h),"max-width":"500px"},{default:t(()=>[e(Qe,{onSubmit:Te(o(_e),["prevent"]),disabled:o(S)},{default:t(()=>[e(le,null,{default:t(()=>[e(ne,null,{default:t(()=>[Vt]),_:1}),e(Z,null,{default:t(()=>[e(Xe,{modelValue:o(H).value.value,"onUpdate:modelValue":m[2]||(m[2]=h=>o(H).value.value=h),"error-messages":o(H).errorMessage.value,label:"請描述檢舉原因",rows:"3","auto-grow":""},null,8,["modelValue","error-messages"])]),_:1}),e(me,null,{default:t(()=>[e(Le),e(T,{color:"blue darken-1",text:"",onClick:m[3]||(m[3]=h=>$.value=!1)},{default:t(()=>[f("取消")]),_:1}),e(T,{color:"blue darken-1",text:"",type:"submit",loading:o(S)},{default:t(()=>[f("提交")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])],64))}},$t=Se(St,[["__scopeId","data-v-86b721a5"]]),ue=n=>(Be("data-v-716ce337"),n=n(),De(),n),It={class:"text--muted"},Nt={class:"font-weight-black",style:{"font-size":"16px","margin-right":"4px"}},Et={key:0,style:{color:"#4e9194","font-size":"14px"}},Pt=ue(()=>c("br",null,null,-1)),Wt={key:1,class:"text--danger my-2 d-inline-block font-weight-black",style:{"font-size":"12px"}},jt=ue(()=>c("br",null,null,-1)),Mt={style:{color:"#4e9194","margin-right":"10px","font-size":"14px"}},At=ue(()=>c("br",null,null,-1)),Tt={key:0,class:"my-2 d-inline-block",style:{color:"black","margin-right":"10px"}},Lt=ue(()=>c("br",null,null,-1)),zt={style:{color:"black","margin-right":"10px"}},Bt={style:{"word-wrap":"break-word"}},Dt=ue(()=>c("h1",null,"故事投票",-1)),X=1,Rt={__name:"StoryItem",props:{category:String,title:String,mainAuthor:[String,Object],content:{type:Array,default:()=>[]},createdAt:String,extensions:{type:Array,default:()=>[]},_id:String,voteTime:[String,Number],voteStart:[String,Date],voteEnd:[String,Date],totalWordCount:{type:Number,required:!0},extendWordLimit:{type:Number,default:50},chapters:{type:Number,default:1},wordsPerChapter:{type:Number,default:100},currentChapterWordCount:{type:Number,default:0},chapterWordCount:{type:Number,default:0},state:{type:Boolean,default:!1},isExpanded:Boolean},emits:["update","toggle"],setup(n,{emit:x}){const v=re(),i=re(),y=Re(),J=v.userId,C=x,{apiAuth:W}=Ve(),D=k("");let V=0;const b=Ae(),l=n,R=k(l.isExpanded?[0]:null),{category:A,title:G,mainAuthor:E,createdAt:Y,_id:r}=l,{content:S}=Ce(l),q=M(()=>l.state),H=M(()=>S.value&&S.value.length>0&&S.value[S.value.length-1].chapterName||"暫無章節名"),$=M(()=>{const a=l.wordsPerChapter-l.currentChapterWordCount;return a===0?l.extendWordLimit:a<l.extendWordLimit?a:l.extendWordLimit||50}),ge=M(()=>[a=>a.length>=X&&a.length<=$.value||`內容字數需在 ${X} 至 ${$.value} 字之間`]),ce=M(()=>l.currentChapterWordCount>=l.wordsPerChapter),_e=M(()=>{const a={newChapterContent:we().required("故事內容必填").min(X,`故事內容不能少於 ${X} 字`).max($.value,`故事內容不能超過 ${$.value} 字`)};return ce.value&&(a.newChapterName=we().required("章節名稱必填").min(1).max(60)),qe(a)}),{handleSubmit:ve,isSubmitting:w,resetForm:m}=He({validationSchema:_e,initialValues:{newChapterContent:"",newChapterName:""}}),h=ke("newChapterName"),F=ke("newChapterContent"),Q=k(!1),xe=M(()=>l.content&&l.content.length>0?l.content[l.content.length-1].content||[]:[]),Ze=()=>{const a=(l.content.length-1)*l.wordsPerChapter,d=l.currentChapterWordCount,s=a+d;return Math.max(0,l.totalWordCount-s)},$e=M(()=>Ze()),{extensions:I,voteEnd:ye}=Ce(l),Ie=k(!1),ie=k(!1),Je=async()=>{if(i.isLogin)try{const a=await W.get(`user/checkBookmark/${r}`);Ie.value=a.data.hasCollection,ie.value=a.data.hasCollection}catch(a){console.error("檢查收藏狀態失敗",a)}},Ke=async()=>{if(!i.isLogin){b({text:"請先登入才能收藏",snackbarProps:{color:"red"}});return}try{const a=await W.post("user/addBookmark",{storyId:r});Ie.value=a.data.hasCollection,ie.value=a.data.hasCollection,b({text:a.data.hasCollection?"收藏故事":"取消收藏",snackbarProps:{color:"accent"}})}catch(a){console.error("收藏操作失败",a),b({text:"收藏操作失败",snackbarProps:{color:"red"}})}},et=M(()=>ie.value?"mdi-heart":"mdi-heart-outline"),tt=()=>{i.isLogin?Q.value=!0:y.push("/login")},de=k(!1),at=async()=>{var a,d,s,_;console.log("mergeHighestVotedStory 開始執行");try{if(!I.value.length){console.log("沒有延續故事可供合併"),C("update");return}if(de.value){C("update");return}if(de.value=!0,!I.value.filter(U=>U.voteCount.length>0).length){console.log("所有延續故事的票數為 0，清空延續故事"),await W.patch(`/story/${r}/clearExtensions`),isExpanded&&b({text:"所有延續故事的票數為 0，已清空延續故事",snackbarProps:{color:"red"}}),C("update");return}const L=I.value.reduce((U,K)=>K.voteCount.length>U.voteCount.length?K:U);if(!(L!=null&&L._id))throw new Error("延續故事未找到");l.currentChapterWordCount===l.wordsPerChapter?(console.log("當前章節已達到字數上限，準備創建新章節"),await W.post(`/story/${r}/newChapter`,{newContent:(a=L.content[0])==null?void 0:a.latestContent,newChapterName:L.chapterName}),console.log("觸發 newChapter"),isExpanded&&b({text:"已成功創建新章節並合併最高票數的延續故事",snackbarProps:{color:"green"}}),C("update")):(await W.patch(`/story/${r}/merge`,{extensionsId:L._id})).data.isCompleted?(l.state=!0,isExpanded&&b({text:"故事已完结！",snackbarProps:{color:"success"}})):isExpanded&&b({text:"延续故事已成功合并到主故事中",snackbarProps:{color:"green"}}),console.log("即將觸發 emit update"),C("update"),console.log("已觸發 emit update"),console.log("合併操作完成")}catch(j){console.error("合併故事時發生錯誤",((d=j.response)==null?void 0:d.data)||j.message||j),isExpanded&&b({text:((_=(s=j==null?void 0:j.response)==null?void 0:s.data)==null?void 0:_.message)||"合併故事時發生錯誤",snackbarProps:{color:"red"}})}finally{console.log("重置 hasMerged "),de.value=!1,C("update")}};let be=!1;const Ne=async()=>{const a=Date.now(),s=new Date(ye.value).getTime()-a;if(s<=0){clearInterval(V),D.value="",I.value.length>0&&!de.value&&!be&&(be=!0,await at(),be=!1);return}const _=Math.floor(s/1e3),j=Math.floor(_/(24*3600)),L=Math.floor(_%(24*3600)/3600),U=Math.floor(_%3600/60),K=_%60,ee=[];j>0&&ee.push(`${j} 天`),L>0&&ee.push(`${L} 小時`),U>0&&ee.push(`${U} 分`),K>0&&ee.push(`${K} 秒`),D.value=ee.join(" ")},Ee=()=>{V&&clearInterval(V),Ne(),V=setInterval(Ne,1e3)};Fe(()=>{i.isLogin&&Je(),ye&&Ee()});const ot=ve(async a=>{var d,s;try{const _=I.value.length===0;await W.post(`/story/${r}`,{chapterName:a.newChapterName,content:a.newChapterContent,voteStart:_?new Date:void 0}),b({text:"延伸內容提交成功",snackbarProps:{color:"green"}}),m(),Q.value=!1,C("update")}catch(_){console.log(_),b({text:((s=(d=_==null?void 0:_.response)==null?void 0:d.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}});Ue(()=>{V&&clearInterval(V)}),pe(()=>l.content,a=>{xe.value=a[0].content}),pe(ye,a=>{a&&Ee()});const st=a=>{let d=!1,s=!1;for(const _ of I.value)_.voteCount.indexOf(J)>-1&&(d=!0,_._id===a._id&&(s=!0));return{hasVoted:d,voteThis:s}};pe(()=>l.isExpanded,a=>{R.value=a?[0]:null});const lt=()=>{console.log("正在執行 emit(toggle)"),C("toggle")},nt=()=>{console.log("正在執行 emit(toggle)"),C("toggle")};return(a,d)=>(u(),P(ht,{class:"customMb",modelValue:R.value,"onUpdate:modelValue":d[4]||(d[4]=s=>R.value=s),onChange:lt},{default:t(()=>[e(ft,null,{default:t(()=>[e(mt,{onClick:nt},{default:t(()=>[e(B,{"no-gutters":""},{default:t(()=>[e(g,{class:"d-flex align-center justify-center text--secondary",style:{"padding-right":"24px"},cols:"1"},{default:t(()=>[c("div",It,p(o(A)),1)]),_:1}),e(g,{cols:"8",class:"text--secondary"},{default:t(()=>[c("span",Nt,p(o(G)),1),q.value?(u(),N("span",Et," （已完結） ")):se("",!0),Pt,o(I)&&o(I).length>0?(u(),N("span",Wt,"投票倒數計時：")):se("",!0),jt,c("span",null,p(H.value),1)]),_:1}),e(g,{cols:"3",class:"text-right",style:{color:"#4e9194"}},{default:t(()=>{var s;return[c("span",Mt,p((s=o(E))==null?void 0:s.username),1),At,o(I)&&o(I).length>0?(u(),N("span",Tt,p(D.value),1)):se("",!0),Lt,c("span",zt,p(new Date(o(Y)).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})),1)]}),_:1})]),_:1})]),_:1}),e(We,null,{default:t(()=>[e(B,{style:{padding:"12px"}},{default:t(()=>[e(g,{cols:"12",class:"mt-1 pa-0",style:{"font-size":"8px"}},{default:t(()=>[c("h1",null,p(o(S).length>0?"最新內容":"開始故事")+" ("+p($e.value===0?"已結束":`剩餘字數：${$e.value}`)+") ",1)]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(B,null,{default:t(()=>[e(g,{cols:"1",class:"d-flex align-center justify-center pa-0"},{default:t(()=>[e(T,{text:"",ripple:!1,variant:"text",class:it(["heart-button pa-0",{filled:ie.value}]),onClick:Ke},{default:t(()=>[e(fe,null,{default:t(()=>[f(p(et.value),1)]),_:1})]),_:1},8,["class"])]),_:1}),e(g,{cols:"11",class:"pl-0"},{default:t(()=>[c("p",Bt,p(xe.value.join("")),1),e(me,null,{default:t(()=>[e(Le),e(T,{color:"secondary",variant:"outlined",onClick:tt,disabled:q.value},{default:t(()=>[f(p(q.value?"故事已完结":"延續故事"),1)]),_:1},8,["disabled"])]),_:1}),e(ze,{modelValue:Q.value,"onUpdate:modelValue":d[3]||(d[3]=s=>Q.value=s),"max-width":"500"},{default:t(()=>[e(Qe,{onSubmit:Te(o(ot),["prevent"]),disabled:o(w)},{default:t(()=>[e(le,null,{default:t(()=>[e(ne,{class:"text-center",style:{"background-color":"#97d8c4"}},{default:t(()=>[f("延續故事")]),_:1}),e(Z,{class:"py-4 pb-0"},{default:t(()=>[ce.value?(u(),P(Pe,{key:0,modelValue:o(h).value.value,"onUpdate:modelValue":d[0]||(d[0]=s=>o(h).value.value=s),class:"mb-4",label:"輸入章節名稱","hide-details":"",minlength:1,maxlength:60},null,8,["modelValue"])):(u(),P(Pe,{key:1,modelValue:H.value,"onUpdate:modelValue":d[1]||(d[1]=s=>H.value=s),class:"mb-4",label:"當前章節名稱","hide-details":"",disabled:""},null,8,["modelValue"])),e(Xe,{modelValue:o(F).value.value,"onUpdate:modelValue":d[2]||(d[2]=s=>o(F).value.value=s),label:`故事內容（字數：${X} - ${$.value} 字）`,rows:"10",minlength:X,maxlength:$.value,counter:"","auto-grow":"",rules:ge.value,style:{"margin-bottom":"8px"}},null,8,["modelValue","label","maxlength","rules"])]),_:1}),e(me,{class:"justify-center align-start py-0"},{default:t(()=>[e(T,{style:{"background-color":"#4e9194",color:"#000000"},type:"submit",loading:o(w)},{default:t(()=>[f("發布")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(I)&&o(I).length>0?(u(),P(We,{key:0},{default:t(()=>[e(g,{cols:"12",class:"mt-1 mb-3 pa-0",style:{"font-size":"8px"}},{default:t(()=>[Dt]),_:1}),(u(!0),N(z,null,O(o(I).slice(0,5),(s,_)=>(u(),P($t,{key:_,storyId:o(r),authorId:s.author._id,extensionId:s._id,content:s.content,chapterName:s.chapterName,author:s.author,voteCount:s.voteCount,voteStatus:st(s)},null,8,["storyId","authorId","extensionId","content","chapterName","author","voteCount","voteStatus"]))),128))]),_:1})):se("",!0)]),_:1})]),_:1},8,["modelValue"]))}},Me=Se(Rt,[["__scopeId","data-v-716ce337"]]),Ft={class:"pa-0 px-4"},Ut=c("h2",null,"收藏故事",-1),qt=c("h2",null,"熱門故事",-1),Ht=c("h2",null,"最新故事",-1),Ot=c("h2",null,"完結故事",-1),Gt={key:1,class:""},Yt=c("h2",null,"創作資源區",-1),ua={__name:"index",setup(n){const x=re(),{api:v,apiAuth:i}=Ve(),y=Re(),J=()=>{x.isLogin?y.push("/createStory"):y.push("/login")},C=k([]),W=k([]),D=k([]),V=k([]),b=k([]),l=k(null),R=E=>{l.value=l.value===E?null:E},A=async()=>{try{const{data:E}=await v.get("/story");C.value=E.result.data;const Y=await v.get("/story/getPopularStories");D.value=Y.data.result.data;const r=await v.get("/story/getNewestStories");V.value=r.data.result.data;const S=await v.get("/story/getCompletedStories");b.value=S.data.result.data;const q=await i.get("/story/getBookmarkStories");W.value=q.data.result.data}catch(E){console.error("Failed to load stories:",E)}},G=[{to:"/articleArea",icon:"mdi-lightbulb-on-outline",title:"創作指引",color:"#F9A825"}];return Fe(()=>{A(),he.on("updateStory",A)}),Ue(()=>{he.off("updateStory",A)}),(E,Y)=>(u(),N(z,null,[e(B,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(le,{class:"rounded-0 px-10 py-auto",height:"200px",color:"surface-variant",image:"https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2948&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",cover:"",elevation:"5"},{default:t(()=>[e(g,null,{default:t(()=>[e(ne,{class:"text-h4 font-weight-bold"},{default:t(()=>[f(" 歡迎來到界筆！ ")]),_:1}),e(Z,{class:"font-weight-bold pa-0 py-2 px-4 mb-2",style:{"font-size":"24px","letter-spacing":"12px"}},{default:t(()=>[f(" 探索和創作無限可能的故事 ")]),_:1}),c("div",Ft,[e(T,{class:"font-weight-black mr-3 px-4",variant:"elevated",color:"#CCB78E",onClick:J,to:"/createStory"},{default:t(()=>[f(" 立即創作 ")]),_:1}),e(T,{class:"font-weight-black px-4",outlined:"",border:"",variant:"elevated",style:{color:"#ccb78e",border:"1px solid #ccb78e","background-color":"rgba(0, 0, 0, 0.47)"},to:"/category"},{default:t(()=>[f(" 探索故事 ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),o(x).isLogin?(u(),P(te,{key:0,style:{padding:"32px"}},{default:t(()=>[e(B,{class:"justify-space-between"},{default:t(()=>[e(g,{cols:"12",class:"pb-0"},{default:t(()=>[Ut]),_:1}),e(ae,{class:"mb-3"}),e(g,{cols:"12",class:"d-flex flex-column justify-space-between"},{default:t(()=>[(u(!0),N(z,null,O(W.value,r=>(u(),P(Me,oe({key:r._id,ref_for:!0},r,{isExpanded:l.value===r._id,onToggle:S=>R(r._id),onUpdate:A}),null,16,["isExpanded","onToggle"]))),128))]),_:1})]),_:1})]),_:1})):se("",!0),e(te,{style:{padding:"32px"}},{default:t(()=>[e(B,{class:"justify-space-between"},{default:t(()=>[e(g,{cols:"12",class:"pb-0"},{default:t(()=>[qt]),_:1}),e(ae,{class:"mb-3"}),e(g,{cols:"12",class:"d-flex flex-row justify-start"},{default:t(()=>[(u(!0),N(z,null,O(D.value,r=>(u(),P(je,oe({key:r._id,ref_for:!0},r),null,16))),128))]),_:1})]),_:1})]),_:1}),e(te,{style:{padding:"32px"}},{default:t(()=>[e(B,{class:"justify-space-between"},{default:t(()=>[e(g,{cols:"12",class:"pb-0"},{default:t(()=>[Ht]),_:1}),e(ae,{class:"mb-3"}),e(g,{cols:"12",class:"d-flex flex-column justify-space-between"},{default:t(()=>[(u(!0),N(z,null,O(V.value,r=>(u(),P(Me,oe({key:r._id,ref_for:!0},r,{onUpdate:A}),null,16))),128))]),_:1})]),_:1})]),_:1}),e(te,{style:{padding:"32px"}},{default:t(()=>[e(B,{class:"justify-space-between"},{default:t(()=>[e(g,{cols:"12",class:"pb-0"},{default:t(()=>[Ot]),_:1}),e(ae,{class:"mb-3"}),e(g,{cols:"12",class:"d-flex flex-row justify-space-between"},{default:t(()=>[b.value.length>0?(u(!0),N(z,{key:0},O(b.value,r=>(u(),P(je,oe({key:r._id,ref_for:!0},r),null,16))),128)):(u(),N("div",Gt,"尚未有已完結故事"))]),_:1})]),_:1})]),_:1}),e(te,{style:{padding:"32px"}},{default:t(()=>[e(B,{class:"justify-space-between"},{default:t(()=>[e(g,{cols:"12",class:"pb-0"},{default:t(()=>[Yt]),_:1}),e(ae,{class:"mb-3"}),e(g,{cols:"12",class:"d-flex flex-row justify-space-between py-0"},{default:t(()=>[e(Oe,{class:"d-flex justify-space-between w-100 py-0",style:{"background-color":"transparent"}},{default:t(()=>[(u(),N(z,null,O(G,(r,S)=>e(Ge,{key:S,to:r.to,link:""},{prepend:t(()=>[e(fe,{size:"80",color:r.color},{default:t(()=>[f(p(r.icon),1)]),_:2},1032,["color"])]),default:t(()=>[e(Ye,{style:{"font-size":"20px","font-weight":"bold"},textContent:p(r.title)},null,8,["textContent"])]),_:2},1032,["to"])),64))]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{ua as default};
