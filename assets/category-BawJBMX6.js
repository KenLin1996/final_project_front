import{x as i,o as I,a6 as ae,a7 as u,aa as P,ac as s,c as t,ad as l,J as k,ae as r,au as se,av as le,a8 as _,ag as v,P as h,at as oe,am as W,ah as o,ao as ne,V as ce,aq as ue,ar as re,ap as de,aw as ie,ak as me,ax as pe,ay as fe}from"./index-Bi9j8mr4.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N}from"./VContainer-Xh312FQW.js";import{V as g}from"./VDivider-DnByuguK.js";import{a as b,V as x}from"./VRow-C_QcEOvS.js";import{a as ve,V as A}from"./VChip-CL_gKfk_.js";import{V as he}from"./VPagination-na7Dys3r.js";import"./VSlideGroup-40nQHEie.js";const V=w=>(pe("data-v-3d64179d"),w=w(),fe(),w),ge={class:"d-flex justify-space-between align-center"},be=V(()=>l("h2",null,"故事分類",-1)),xe=V(()=>l("h3",null,"作品分類",-1)),Ve=V(()=>l("h3",null,"作品字數",-1)),Ce=V(()=>l("h3",null,"作品狀態",-1)),ke={class:"d-flex justify-space-between align-cente"},we=V(()=>l("h3",null,"標籤選擇",-1)),ye={class:"mr-4",style:{"font-weight":"bolder",color:"black"}},Se={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Le={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Ie=V(()=>l("p",{style:{"font-weight":"bolder",color:"black"}},"最新內容：",-1)),B=3,Pe={__name:"category",setup(w){const m=i([]),C=i(""),p=i(""),f=i(""),d=i(""),y=i(1),{api:R}=oe(),S=i([]),U=["愛情","奇幻玄幻","科幻未來","驚悚推理","靈異恐怖","武俠仙俠","都市","心情抒發","LGBTQ+","勵志成長","幽默諷喻","影視","同人","網遊","歷史傳記","軍事戰爭","生活風格","親子共享","藝術設計","科普","商業理財","文藝評論","其他"],$=["不限","50字以下","1000字以下","2萬字以內","2萬-5萬字","5萬-10萬字","10萬-30萬字","30萬-60萬字","60萬-100萬字","100萬字以上"],D=["不限","連載","完結"],G=["不限","戀愛","異界","校園","戰鬥","冒險","魔法","異能","超能力","超自然","重生","穿越","爽文/輕鬆","搞笑","虐心","復仇","靈異神怪","暗黑","恐怖","奇幻","異世界轉生","逆襲","未來世界","英雄","百合","同志","日常","科幻","成長","家庭","友情","偵探","職場","青梅竹馬","後宮","妖怪","節操","二創","悲劇","喜劇","異國","輕小說","心理","神話","蒸汽龐克","時間旅行","機器人","人工智能","動物","快樂","悲傷","焦慮","平靜","懷舊","希望","孤獨","愛","失落","感激","興奮","迷惘","安慰","熱情","自在"];(async()=>{try{const{data:a}=await R.get("/story");S.value=a.result.data||[]}catch(a){console.error(a),S.value=[]}})();const Q=a=>{p.value=p.value===a?"":a},q=a=>{f.value=f.value===a?"":a},z=a=>{d.value=d.value===a?"":a},E=()=>{m.value=[]},J=a=>{switch(a){case"50字以下":return{min:0,max:50};case"1000字以下":return{min:51,max:1e3};case"2萬字以內":return{min:1001,max:2e4};case"2萬-5萬字":return{min:20001,max:5e4};case"5萬-10萬字":return{min:50001,max:1e5};case"10萬-30萬字":return{min:100001,max:3e5};case"30萬-60萬字":return{min:300001,max:6e5};case"60萬-100萬字":return{min:600001,max:1e6};case"100萬字以上":return{min:1000001,max:1/0};default:return{min:0,max:1/0}}},T=I(()=>S.value.filter(a=>{var F;if(!a)return!1;const n=C.value?C.value.toLowerCase():"",L=a.title?a.title.toLowerCase().includes(n):!1,e=(F=a.mainAuthor)!=null&&F.username?a.mainAuthor.username.toLowerCase().includes(n):!1,c=p.value?a.category===p.value:!0,j=J(f.value),X=f.value?a.totalWordCount>=j.min&&a.totalWordCount<=j.max:!0,Y=a.state?"完結":"連載",Z=d.value?d.value==="不限"||Y===d.value:!0,ee=m.value.length?m.value.every(te=>a.chapterLabels.includes(te)):!0;return(L||e)&&c&&X&&Z&&ee})),M=()=>{C.value="",m.value=[],p.value="",f.value="",d.value=""},O=I(()=>Math.ceil(T.value.length/B)),H=I(()=>{const a=(y.value-1)*B;return T.value.slice(a,a+B)}),K=a=>{y.value=a};return(a,n)=>{const L=ae("router-link");return u(),P(N,{class:"ma-0 bg-white",style:{"max-width":"100vw"}},{default:s(()=>[t(N,{class:"w-100",style:{padding:"32px"}},{default:s(()=>[l("div",ge,[be,t(k,{onClick:M,class:"custom-reset-btn"},{default:s(()=>[r("重設所有篩選")]),_:1})]),t(g,{class:"custom-mb-5"}),t(se,{class:"my-5"},{default:s(()=>[t(le,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=e=>C.value=e),label:"搜尋","prepend-inner-icon":"mdi-magnify",density:"compact","hide-details":"","single-line":"",variant:"solo",clearable:"",color:"black"},null,8,["modelValue"])]),_:1}),xe,t(g,{class:"custom-mb-5"}),t(b,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(U,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W([{"custom-btn":!0,selected:p.value===e},"my-1 mr-1"]),onClick:c=>Q(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ve,t(g,{class:"custom-mb-5"}),t(b,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v($,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W(["mr-1 my-1",{"custom-btn":!0,selected:f.value===e}]),onClick:c=>q(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ce,t(g,{class:"custom-mb-5"}),t(b,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(D,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W(["mr-1",{"custom-btn":!0,selected:d.value===e}]),onClick:c=>z(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),l("div",ke,[we,t(k,{onClick:E,class:"custom-reset-btn"},{default:s(()=>[r("重設標籤")]),_:1})]),t(g,{class:"custom-mb-5"}),t(b,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[t(ve,{column:"",multiple:"",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),"selected-class":"custom-chipsSelected"},{default:s(()=>[(u(),_(h,null,v(G,e=>t(A,{key:e,text:e,class:"custom-chip d-flex align-center justify-center",elevation:"2",value:e},null,8,["text","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(u(!0),_(h,null,v(H.value,e=>(u(),P(L,{key:e.id,to:"/stories/"+e._id,style:{"text-decoration":"none"}},{default:s(()=>[t(ne,{class:"rounded-lg",style:{margin:"15px","box-shadow":`0 2px 4px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(0, 0, 0, 0.2)`}},{default:s(()=>[t(b,{"no-gutters":""},{default:s(()=>[t(x,{cols:"2",class:"pt-4 pb-4 pl-4"},{default:s(()=>[t(ce,{class:"rounded-lg",src:e.image,width:"200px",height:"150px",cover:""},null,8,["src"])]),_:2},1024),t(x,{cols:"10"},{default:s(()=>[t(b,{"no-gutters":""},{default:s(()=>[t(x,{class:"mt-4"},{default:s(()=>[t(ue,{class:"d-flex justify-space-between pt-0"},{default:s(()=>[l("span",null,o(e.title),1),t(A,{style:{"border-radius":"4px",padding:"0px 12px","background-color":"#7dbfe0",color:"black","font-weight":"bold"}},{default:s(()=>[r(o(e.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(re,null,{default:s(()=>[l("div",null,[l("span",ye,"初創者："+o(e.mainAuthor.username),1)]),l("p",Se," 作品字數："+o(e.totalWordCount),1),l("p",Le," 作品狀態："+o(e.state?"完結":"連載"),1),Ie]),_:2},1024),t(de,{class:"text py-1",style:{"font-weight":"500"}},{default:s(()=>{var c;return[r(o((c=e.content[e.content.length-1])==null?void 0:c.content.join("")),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),t(g,{style:{color:"black"}}),t(ie,{class:"px-4 py-1"},{default:s(()=>[t(me,{class:"mr-2"},{default:s(()=>[r("mdi-label-outline")]),_:1}),(u(!0),_(h,null,v(e.chapterLabels,c=>(u(),P(A,{class:"mr-2",style:{"border-radius":"4px","background-color":"rgba(151, 216, 196, 0.4)"}},{default:s(()=>[r("#"+o(c),1)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128)),t(he,{modelValue:y.value,"onUpdate:modelValue":n[2]||(n[2]=e=>y.value=e),length:O.value,onInput:K,class:"mt-5",density:"compact"},null,8,["modelValue","length"])]),_:1})]),_:1})}}},$e=_e(Pe,[["__scopeId","data-v-3d64179d"]]);export{$e as default};
