import{a3 as M,x,a6 as B,a7 as I,a8 as U,c as a,ac as r,ao as q,at as E,a5 as N,ap as T,ad as d,V as $,J as b,ae as _,aF as j,a9 as e,au as m}from"./index-Bzmhv8R7.js";import{_ as A}from"./stor-genLogo-CZoS3VG_.js";import{c as D,b as u,g as G,u as J,f as c,V as O}from"./vee-validate.esm-BtqnpI9n.js";import{v as R}from"./index-Etsc8UVN.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as H}from"./VDivider-BRp88LzG.js";const K={class:"register-page"},L={class:"d-flex justify-center text-center"},Q={class:"d-flex flex-column align-center"},W={class:"text-center"},X={class:"text-center"},Y={__name:"register",setup(Z){const{api:y}=E(),h=N(),w=M(),C=D({email:u().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",t=>R.isEmail(t)),username:u().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符"),password:u().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:u().oneOf([G("password")],"密碼不一致")}),{handleSubmit:k,isSubmitting:V}=J({validationSchema:C}),p=c("email"),g=c("username"),f=c("password"),v=c("passwordConfirm"),l=x(!1),n=x(!1),P=()=>{l.value=!l.value},S=()=>{n.value=!n.value},F=k(async t=>{var o,i;try{await y.post("/user",{email:t.email,username:t.username,password:t.password}),w({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(s){console.log(s),w({text:((i=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(t,o)=>{const i=B("router-link");return I(),U("div",K,[a(q,{class:"register-card",style:{"margin-top":"46px"}},{default:r(()=>[a(T,{class:"card-content px-8 py-4"},{default:r(()=>[d("div",L,[a(i,{to:"/"},{default:r(()=>[a($,{class:"mx-auto",width:50,cover:"",src:A})]),_:1})]),d("div",Q,[a(b,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"my-4 elevation-1 w-66",variant:"plain",to:"/login"},{default:r(()=>[_(" 使用 Google 註冊 ")]),_:1})]),a(H,{class:"mb-4"}),a(O,{onSubmit:j(e(F),["prevent"]),disabled:e(V)},{default:r(()=>[a(m,{label:"信箱",type:"email",modelValue:e(p).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value,class:"mb-2",autocomplete:"email"},null,8,["modelValue","error-messages"]),a(m,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value,class:"mb-2",autocomplete:"username"},null,8,["modelValue","error-messages"]),a(m,{label:"密碼",type:l.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(f).value.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e(f).value.value=s),"error-messages":e(f).errorMessage.value,"append-inner-icon":l.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":P,class:"mb-2",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),a(m,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":o[3]||(o[3]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":S,class:"mb-4",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),d("div",W,[a(b,{type:"submit",outlined:"",border:"",class:"register-btn mb-3 w-33",loading:e(V)},{default:r(()=>[_(" 註冊 ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"]),d("div",X,[a(b,{ripple:!1,variant:"plain",to:"/login"},{default:r(()=>[_(" 登入 ")]),_:1})])]),_:1})]),_:1})])}}},le=z(Y,[["__scopeId","data-v-c27a0193"]]);export{le as default};
