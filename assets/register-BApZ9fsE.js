import{N as U,x as _,Q as B,R as F,X as I,c as a,T as r,a7 as N,ac as T,P as j,a8 as q,a4 as d,V as E,U as b,W as w,ap as $,a1 as e,ad as m}from"./index-DZH1FvPX.js";import{c as R,b as u,g as A,u as D,f as c,V as G}from"./vee-validate.esm-C5MipkAk.js";import{v as O}from"./index-CcuJMjLW.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as W}from"./VDivider-Cn5E2RE9.js";const X={class:"register-page"},z={class:"d-flex justify-center text-center"},H={class:"d-flex flex-column align-center"},J={class:"text-center"},K={class:"text-center"},L={__name:"register",setup(Y){const{api:y}=T(),h=j(),x=U(),C=R({email:u().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",t=>O.isEmail(t)),username:u().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符"),password:u().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:u().oneOf([A("password")],"密碼不一致")}),{handleSubmit:k,isSubmitting:V}=D({validationSchema:C}),p=c("email"),g=c("username"),f=c("password"),v=c("passwordConfirm"),l=_(!1),n=_(!1),P=()=>{l.value=!l.value},S=()=>{n.value=!n.value},M=k(async t=>{var o,i;try{await y.post("/user",{email:t.email,username:t.username,password:t.password}),x({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(s){console.log(s),x({text:((i=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(t,o)=>{const i=B("router-link");return F(),I("div",X,[a(N,{class:"register-card",style:{"margin-top":"46px"}},{default:r(()=>[a(q,{class:"card-content px-8 py-4"},{default:r(()=>[d("div",z,[a(i,{to:"/"},{default:r(()=>[a(E,{class:"mx-auto",width:80,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1})]),d("div",H,[a(b,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"my-4 elevation-1 w-66",variant:"plain",to:"/login"},{default:r(()=>[w(" 使用 Google 註冊 ")]),_:1})]),a(W,{class:"mb-4"}),a(G,{onSubmit:$(e(M),["prevent"]),disabled:e(V)},{default:r(()=>[a(m,{label:"信箱",type:"email",modelValue:e(p).value.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value,class:"mb-2",autocomplete:"email"},null,8,["modelValue","error-messages"]),a(m,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value,class:"mb-2",autocomplete:"username"},null,8,["modelValue","error-messages"]),a(m,{label:"密碼",type:l.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(f).value.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e(f).value.value=s),"error-messages":e(f).errorMessage.value,"append-inner-icon":l.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":P,class:"mb-2",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),a(m,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":o[3]||(o[3]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":S,class:"mb-4",autocomplete:"new-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),d("div",J,[a(b,{type:"submit",outlined:"",border:"",class:"register-btn mb-3 w-33",loading:e(V)},{default:r(()=>[w(" 註冊 ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"]),d("div",K,[a(b,{ripple:!1,variant:"plain",to:"/login"},{default:r(()=>[w(" 登入 ")]),_:1})])]),_:1})]),_:1})])}}},re=Q(L,[["__scopeId","data-v-82710a76"]]);export{re as default};
