import{x as $,o as a,R as b,S as g,T as n,a4 as r,_ as h,c as d,W as i,U as p,ac as N,O as V,P as k}from"./index-DZH1FvPX.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as S}from"./VContainer-Dm3Q9-rI.js";const R={class:"my-4 white-space-pre-line word-wrap-break-word"},j={class:"text-center"},P={__name:"[articleId]",setup(T){const{api:f}=N(),v=V(),x=k(),s=$({content:[]}),c=a(()=>v.params.id),_=a(()=>v.params.articleId),l=a(()=>s.value.content.find(e=>e._id===_.value)),y=a(()=>{var e;return((e=l.value)==null?void 0:e.content.join(""))||""}),u=a(()=>s.value.content.findIndex(e=>e._id===_.value)),C=a(()=>u.value>0),I=a(()=>u.value<s.value.content.length-1),m=e=>{const t=u.value+e;if(t>=0&&t<s.value.content.length){const o=s.value.content[t]._id;x.push(`/stories/${c.value}/articles/${o}`)}};return(async()=>{var e;try{const{data:t}=await f.get(`/story/${c.value}`);s.value=t.result,document.title=`界筆 | ${((e=l.value)==null?void 0:e.chapterName)||"錯誤章節"}`}catch(t){console.error("加載故事失敗:",t)}})(),(e,t)=>(b(),g(S,{class:"d-flex flex-column justify-space-between pa-8",style:{"min-height":"480px"}},{default:n(()=>{var o;return[r("div",null,[r("h2",null,h((o=l.value)==null?void 0:o.chapterName),1),r("p",R,h(y.value),1)]),r("div",j,[d(p,{class:"mx-2",onClick:t[0]||(t[0]=w=>m(-1)),disabled:!C.value},{default:n(()=>[i("上一章")]),_:1},8,["disabled"]),d(p,{class:"mx-2",to:`/stories/${c.value}`,color:"primary"},{default:n(()=>[i("回故事頁")]),_:1},8,["to"]),d(p,{class:"mx-2",onClick:t[1]||(t[1]=w=>m(1)),disabled:!I.value},{default:n(()=>[i("下一章")]),_:1},8,["disabled"])])]}),_:1}))}},W=B(P,[["__scopeId","data-v-2a8d0c43"]]);export{W as default};
