import{aT as $t,p as O,t as N,D as ee,ax as ne,ao as se,x as B,o as D,aU as he,aV as at,z as lt,aW as nt,H as st,y as _e,aL as Ie,aE as ie,aX as de,aY as Lt,as as z,b as Rt,m as rt,aZ as ot,d as Nt,e as Ot,a_ as Et,a as it,f as ut,a$ as Mt,g as Q,n as Ht,l as dt,b0 as xe,s as Gt,q as Fe,I as jt,b1 as ce,u as ae,c as n,S as E,G as M,b2 as We,aH as ze,b3 as Ut,v as X,b4 as Wt,b5 as zt,b6 as Re,b7 as qt,b8 as Kt,h as Xt,b9 as Yt,W as te,Z as Ae,T as U,ba as De,ad as $e,Y as ye,bb as Zt,bc as fe,a6 as Qt,N as Jt,bd as ea,O as ta,U as aa,R as V,ac as la,a8 as na,P as sa,a0 as $,a5 as Te,a4 as Ce,V as ra,$ as j,a3 as oa,ae as ia,aS as qe,a7 as ua,af as da,ag as ca}from"./index-93TIEZcQ.js";import{c as fa,a as va,e as Ke,u as ma,b as Be}from"./vee-validate.esm-PX7IY5fs.js";import{_ as ga}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ba}from"./VContainer-z1ruqh2u.js";import{V as ya,a as ha,b as ve,c as pa,d as me}from"./VTabs-DsQANiy6.js";import{V as xa,a as Sa}from"./VList-BHt2qzze.js";import{V as oe}from"./VDivider-BIvi382p.js";import{d as Ne,c as Oe,m as ka,u as wa,e as Xe,f as ge}from"./VRadioGroup-y8L5a2A2.js";import{V as Pa}from"./VChip-Bu1cUmx9.js";import{V as Va}from"./VForm-BEUFsBQW.js";import"./VSlideGroup-DTnptBId.js";import"./VMenu-CFI8FnfX.js";import"./VSelectionControl-CafFGjy5.js";function Ye(e,l,a){return Object.keys(e).filter(t=>$t(t)&&t.endsWith(l)).reduce((t,s)=>(t[s.slice(0,-l.length)]=r=>e[s](r,a(r)),t),{})}const _a=O({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),ct=Symbol.for("vuetify:datatable:expanded");function Ia(e){const l=N(e,"expandOnClick"),a=ee(e,"expanded",e.expanded,o=>new Set(o),o=>[...o.values()]);function t(o,d){const f=new Set(a.value);d?f.add(o.value):f.delete(o.value),a.value=f}function s(o){return a.value.has(o.value)}function r(o){t(o,!s(o))}const i={expand:t,expanded:a,expandOnClick:l,isExpanded:s,toggleExpand:r};return ne(ct,i),i}function ft(){const e=se(ct);if(!e)throw new Error("foo");return e}const Da=O({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),vt=Symbol.for("vuetify:data-table-group");function Ta(e){return{groupBy:ee(e,"groupBy")}}function Ca(e){const{disableSort:l,groupBy:a,sortBy:t}=e,s=B(new Set),r=D(()=>a.value.map(v=>({...v,order:v.order??!1})).concat(l!=null&&l.value?[]:t.value));function i(v){return s.value.has(v.id)}function o(v){const h=new Set(s.value);i(v)?h.delete(v.id):h.add(v.id),s.value=h}function d(v){function h(m){const p=[];for(const b of m.items)"type"in b&&b.type==="group"?p.push(...h(b)):p.push(b);return p}return h({type:"group",items:v,id:"dummy",key:"dummy",value:"dummy",depth:0})}const f={sortByWithGroups:r,toggleGroup:o,opened:s,groupBy:a,extractRows:d,isGroupOpen:i};return ne(vt,f),f}function mt(){const e=se(vt);if(!e)throw new Error("Missing group!");return e}function Ba(e,l){if(!e.length)return[];const a=new Map;for(const t of e){const s=he(t.raw,l);a.has(s)||a.set(s,[]),a.get(s).push(t)}return a}function gt(e,l){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const s=Ba(e,l[0]),r=[],i=l.slice(1);return s.forEach((o,d)=>{const f=l[0],v=`${t}_${f}_${d}`;r.push({depth:a,id:v,key:f,value:d,items:i.length?gt(o,i,a+1,v):o,type:"group"})}),r}function bt(e,l){const a=[];for(const t of e)"type"in t&&t.type==="group"?(t.value!=null&&a.push(t),(l.has(t.id)||t.value==null)&&a.push(...bt(t.items,l))):a.push(t);return a}function Fa(e,l,a){return{flatItems:D(()=>{if(!l.value.length)return e.value;const s=gt(e.value,l.value.map(r=>r.key));return bt(s,a.value)})}}function Aa(e){let{page:l,itemsPerPage:a,sortBy:t,groupBy:s,search:r}=e;const i=at("VDataTable"),o=D(()=>({page:l.value,itemsPerPage:a.value,sortBy:t.value,groupBy:s.value,search:r.value}));let d=null;lt(o,()=>{nt(d,o.value)||(d&&d.search!==o.value.search&&(l.value=1),i.emit("update:options",o.value),d=o.value)},{deep:!0,immediate:!0})}const $a=O({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),yt=Symbol.for("vuetify:data-table-pagination");function La(e){const l=ee(e,"page",void 0,t=>+(t??1)),a=ee(e,"itemsPerPage",void 0,t=>+(t??10));return{page:l,itemsPerPage:a}}function Ra(e){const{page:l,itemsPerPage:a,itemsLength:t}=e,s=D(()=>a.value===-1?0:a.value*(l.value-1)),r=D(()=>a.value===-1?t.value:Math.min(t.value,s.value+a.value)),i=D(()=>a.value===-1||t.value===0?1:Math.ceil(t.value/a.value));st(()=>{l.value>i.value&&(l.value=i.value)});function o(m){a.value=m,l.value=1}function d(){l.value=_e(l.value+1,1,i.value)}function f(){l.value=_e(l.value-1,1,i.value)}function v(m){l.value=_e(m,1,i.value)}const h={page:l,itemsPerPage:a,startIndex:s,stopIndex:r,pageCount:i,itemsLength:t,nextPage:d,prevPage:f,setPage:v,setItemsPerPage:o};return ne(yt,h),h}function Na(){const e=se(yt);if(!e)throw new Error("Missing pagination!");return e}function Oa(e){const l=at("usePaginatedItems"),{items:a,startIndex:t,stopIndex:s,itemsPerPage:r}=e,i=D(()=>r.value<=0?a.value:a.value.slice(t.value,s.value));return lt(i,o=>{l.emit("update:currentItems",o)}),{paginatedItems:i}}const Ea={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:l,value:a}=e;return new Set(a?[(t=l[0])==null?void 0:t.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},ht={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const s of l)a?t.add(s.value):t.delete(s.value);return t},selectAll:e=>{let{value:l,currentPage:a,selected:t}=e;return ht.select({items:a,value:l,selected:t})}},pt={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const s of l)a?t.add(s.value):t.delete(s.value);return t},selectAll:e=>{let{value:l,allItems:a,selected:t}=e;return pt.select({items:a,value:l,selected:t})}},Ma=O({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:nt}},"DataTable-select"),xt=Symbol.for("vuetify:data-table-selection");function Ha(e,l){let{allItems:a,currentPage:t}=l;const s=ee(e,"modelValue",e.modelValue,x=>new Set(Ie(x).map(c=>{var F;return((F=a.value.find(L=>e.valueComparator(c,L.value)))==null?void 0:F.value)??c})),x=>[...x.values()]),r=D(()=>a.value.filter(x=>x.selectable)),i=D(()=>t.value.filter(x=>x.selectable)),o=D(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Ea;case"all":return pt;case"page":default:return ht}});function d(x){return Ie(x).every(c=>s.value.has(c.value))}function f(x){return Ie(x).some(c=>s.value.has(c.value))}function v(x,c){const F=o.value.select({items:x,value:c,selected:new Set(s.value)});s.value=F}function h(x){v([x],!d([x]))}function m(x){const c=o.value.selectAll({value:x,allItems:r.value,currentPage:i.value,selected:new Set(s.value)});s.value=c}const p=D(()=>s.value.size>0),b=D(()=>{const x=o.value.allSelected({allItems:r.value,currentPage:i.value});return!!x.length&&d(x)}),w=D(()=>o.value.showSelectAll),g={toggleSelect:h,select:v,selectAll:m,isSelected:d,isSomeSelected:f,someSelected:p,allSelected:b,showSelectAll:w};return ne(xt,g),g}function Se(){const e=se(xt);if(!e)throw new Error("Missing selection!");return e}const Ga=O({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),St=Symbol.for("vuetify:data-table-sort");function ja(e){const l=ee(e,"sortBy"),a=N(e,"mustSort"),t=N(e,"multiSort");return{sortBy:l,mustSort:a,multiSort:t}}function Ua(e){const{sortBy:l,mustSort:a,multiSort:t,page:s}=e,r=d=>{if(d.key==null)return;let f=l.value.map(h=>({...h}))??[];const v=f.find(h=>h.key===d.key);v?v.order==="desc"?a.value?v.order="asc":f=f.filter(h=>h.key!==d.key):v.order="desc":t.value?f=[...f,{key:d.key,order:"asc"}]:f=[{key:d.key,order:"asc"}],l.value=f,s&&(s.value=1)};function i(d){return!!l.value.find(f=>f.key===d.key)}const o={sortBy:l,toggleSort:r,isSorted:i};return ne(St,o),o}function kt(){const e=se(St);if(!e)throw new Error("Missing sort!");return e}function Wa(e,l,a,t){const s=ie();return{sortedItems:D(()=>{var i,o;return a.value.length?za(l.value,a.value,s.current.value,{transform:t==null?void 0:t.transform,sortFunctions:{...e.customKeySort,...(i=t==null?void 0:t.sortFunctions)==null?void 0:i.value},sortRawFunctions:(o=t==null?void 0:t.sortRawFunctions)==null?void 0:o.value}):l.value})}}function za(e,l,a,t){const s=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(i=>[i,t!=null&&t.transform?t.transform(i):i]).sort((i,o)=>{var d,f;for(let v=0;v<l.length;v++){let h=!1;const m=l[v].key,p=l[v].order??"asc";if(p===!1)continue;let b=he(i[1],m),w=he(o[1],m),g=i[0].raw,x=o[0].raw;if(p==="desc"&&([b,w]=[w,b],[g,x]=[x,g]),(d=t==null?void 0:t.sortRawFunctions)!=null&&d[m]){const c=t.sortRawFunctions[m](g,x);if(c==null)continue;if(h=!0,c)return c}if((f=t==null?void 0:t.sortFunctions)!=null&&f[m]){const c=t.sortFunctions[m](b,w);if(c==null)continue;if(h=!0,c)return c}if(!h){if(b instanceof Date&&w instanceof Date)return b.getTime()-w.getTime();if([b,w]=[b,w].map(c=>c!=null?c.toString().toLocaleLowerCase():c),b!==w)return de(b)&&de(w)?0:de(b)?-1:de(w)?1:!isNaN(b)&&!isNaN(w)?Number(b)-Number(w):s.compare(b,w)}}return 0}).map(i=>{let[o]=i;return o})}function qa(){const e=B([]);Lt(()=>e.value=[]);function l(a,t){e.value[t]=a}return{refs:e,updateRef:l}}const Ka=O({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:z,default:"$first"},prevIcon:{type:z,default:"$prev"},nextIcon:{type:z,default:"$next"},lastIcon:{type:z,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Rt(),...rt(),...ot(),...Nt(),...Ot(),...Et(),...it({tag:"nav"}),...ut(),...Mt({variant:"text"})},"VPagination"),Ze=Q()({name:"VPagination",props:Ka(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,l){let{slots:a,emit:t}=l;const s=ee(e,"modelValue"),{t:r,n:i}=ie(),{isRtl:o}=Ht(),{themeClasses:d}=dt(e),{width:f}=xe(),v=Gt(-1);Fe(void 0,{scoped:!0});const{resizeRef:h}=jt(y=>{if(!y.length)return;const{target:u,contentRect:I}=y[0],P=u.querySelector(".v-pagination__list > *");if(!P)return;const T=I.width,R=P.offsetWidth+parseFloat(getComputedStyle(P).marginRight)*2;v.value=w(T,R)}),m=D(()=>parseInt(e.length,10)),p=D(()=>parseInt(e.start,10)),b=D(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):v.value>=0?v.value:w(f.value,58));function w(y,u){const I=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((y-u*I)/u).toFixed(2)))}const g=D(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(b.value<=0)return[];if(b.value===1)return[s.value];if(m.value<=b.value)return ce(m.value,p.value);const y=b.value%2===0,u=y?b.value/2:Math.floor(b.value/2),I=y?u:u+1,P=m.value-u;if(I-s.value>=0)return[...ce(Math.max(1,b.value-1),p.value),e.ellipsis,m.value];if(s.value-P>=(y?1:0)){const T=b.value-1,R=m.value-T+p.value;return[p.value,e.ellipsis,...ce(T,R)]}else{const T=Math.max(1,b.value-3),R=T===1?s.value:s.value-Math.ceil(T/2)+p.value;return[p.value,e.ellipsis,...ce(T,R),e.ellipsis,m.value]}});function x(y,u,I){y.preventDefault(),s.value=u,I&&t(I,u)}const{refs:c,updateRef:F}=qa();Fe({VPaginationBtn:{color:N(e,"color"),border:N(e,"border"),density:N(e,"density"),size:N(e,"size"),variant:N(e,"variant"),rounded:N(e,"rounded"),elevation:N(e,"elevation")}});const L=D(()=>g.value.map((y,u)=>{const I=P=>F(P,u);if(typeof y=="string")return{isActive:!1,key:`ellipsis-${u}`,page:y,props:{ref:I,ellipsis:!0,icon:!0,disabled:!0}};{const P=y===s.value;return{isActive:P,key:y,page:i(y),props:{ref:I,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:P?e.activeColor:e.color,"aria-current":P,"aria-label":r(P?e.currentPageAriaLabel:e.pageAriaLabel,y),onClick:T=>x(T,y)}}}})),_=D(()=>{const y=!!e.disabled||s.value<=p.value,u=!!e.disabled||s.value>=p.value+m.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:I=>x(I,p.value,"first"),disabled:y,"aria-label":r(e.firstAriaLabel),"aria-disabled":y}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:I=>x(I,s.value-1,"prev"),disabled:y,"aria-label":r(e.previousAriaLabel),"aria-disabled":y},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:I=>x(I,s.value+1,"next"),disabled:u,"aria-label":r(e.nextAriaLabel),"aria-disabled":u},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:I=>x(I,p.value+m.value-1,"last"),disabled:u,"aria-label":r(e.lastAriaLabel),"aria-disabled":u}:void 0}});function G(){var u;const y=s.value-p.value;(u=c.value[y])==null||u.$el.focus()}function q(y){y.key===We.left&&!e.disabled&&s.value>+e.start?(s.value=s.value-1,ze(G)):y.key===We.right&&!e.disabled&&s.value<p.value+m.value-1&&(s.value=s.value+1,ze(G))}return ae(()=>n(e.tag,{ref:h,class:["v-pagination",d.value,e.class],style:e.style,role:"navigation","aria-label":r(e.ariaLabel),onKeydown:q,"data-test":"v-pagination-root"},{default:()=>[n("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&n("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(_.value.first):n(E,M({_as:"VPaginationBtn"},_.value.first),null)]),n("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(_.value.prev):n(E,M({_as:"VPaginationBtn"},_.value.prev),null)]),L.value.map((y,u)=>n("li",{key:y.key,class:["v-pagination__item",{"v-pagination__item--is-active":y.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(y):n(E,M({_as:"VPaginationBtn"},y.props),{default:()=>[y.page]})])),n("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(_.value.next):n(E,M({_as:"VPaginationBtn"},_.value.next),null)]),e.showFirstLastPage&&n("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(_.value.last):n(E,M({_as:"VPaginationBtn"},_.value.last),null)])])]})),{}}}),wt=O({prevIcon:{type:z,default:"$prev"},nextIcon:{type:z,default:"$next"},firstIcon:{type:z,default:"$first"},lastIcon:{type:z,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Qe=Q()({name:"VDataTableFooter",props:wt(),setup(e,l){let{slots:a}=l;const{t}=ie(),{page:s,pageCount:r,startIndex:i,stopIndex:o,itemsLength:d,itemsPerPage:f,setItemsPerPage:v}=Na(),h=D(()=>e.itemsPerPageOptions.map(m=>typeof m=="number"?{value:m,title:m===-1?t("$vuetify.dataFooter.itemsPerPageAll"):String(m)}:{...m,title:isNaN(Number(m.title))?t(m.title):m.title}));return ae(()=>{var p;const m=Ze.filterProps(e);return n("div",{class:"v-data-table-footer"},[(p=a.prepend)==null?void 0:p.call(a),n("div",{class:"v-data-table-footer__items-per-page"},[n("span",null,[t(e.itemsPerPageText)]),n(Ne,{items:h.value,modelValue:f.value,"onUpdate:modelValue":b=>v(Number(b)),density:"compact",variant:"outlined","hide-details":!0},null)]),n("div",{class:"v-data-table-footer__info"},[n("div",null,[t(e.pageText,d.value?i.value+1:0,o.value,d.value)])]),n("div",{class:"v-data-table-footer__pagination"},[n(Ze,M({modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:r.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},m),null)])])}),{}}}),pe=Ut({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,l)=>{let{slots:a}=l;const t=e.tag??"td";return n(t,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:X(e.height),width:X(e.width),maxWidth:X(e.maxWidth),left:X(e.fixedOffset||null)}},{default:()=>{var s;return[(s=a.default)==null?void 0:s.call(a)]}})}),Xa=O({headers:Array},"DataTable-header"),Pt=Symbol.for("vuetify:data-table-headers"),Vt={title:"",sortable:!1},Ya={...Vt,width:48};function Za(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,t)=>{let s=!1;for(let r=0;r<l.length;r++)if(l[r].priority>t){l.splice(r,0,{element:a,priority:t}),s=!0;break}s||l.push({element:a,priority:t})},size:()=>l.length,count:()=>{let a=0;if(!l.length)return 0;const t=Math.floor(l[0].priority);for(let s=0;s<l.length;s++)Math.floor(l[s].priority)===t&&(a+=1);return a},dequeue:()=>l.shift()}}function Le(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)l.push(e);else for(const a of e.children)Le(a,l);return l}function _t(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&l.add(a.key),a.children&&_t(a.children,l);return l}function Qa(e){if(e.key){if(e.key==="data-table-group")return Vt;if(["data-table-expand","data-table-select"].includes(e.key))return Ya}}function Ee(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(l,...e.children.map(a=>Ee(a,l+1))):l}function Ja(e){let l=!1;function a(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r)if(i&&(r.fixed=!0),r.fixed)if(r.children)for(let o=r.children.length-1;o>=0;o--)a(r.children[o],!0);else l?isNaN(+r.width)&&zt(`Multiple fixed columns should have a static width (key: ${r.key})`):r.lastFixed=!0,l=!0;else if(r.children)for(let o=r.children.length-1;o>=0;o--)a(r.children[o]);else l=!1}for(let r=e.length-1;r>=0;r--)a(e[r]);function t(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return i;if(r.children){r.fixedOffset=i;for(const o of r.children)i=t(o,i)}else r.fixed&&(r.fixedOffset=i,i+=parseFloat(r.width||"0")||0);return i}let s=0;for(const r of e)s=t(r,s)}function el(e,l){const a=[];let t=0;const s=Za(e);for(;s.size()>0;){let i=s.count();const o=[];let d=1;for(;i>0;){const{element:f,priority:v}=s.dequeue(),h=l-t-Ee(f);if(o.push({...f,rowspan:h??1,colspan:f.children?Le(f).length:1}),f.children)for(const m of f.children){const p=v%1+d/Math.pow(10,t+2);s.enqueue(m,t+h+p)}d+=1,i-=1}t+=1,a.push(o)}return{columns:e.map(i=>Le(i)).flat(),headers:a}}function It(e){const l=[];for(const a of e){const t={...Qa(a),...a},s=t.key??(typeof t.value=="string"?t.value:null),r=t.value??s??null,i={...t,key:s,value:r,sortable:t.sortable??(t.key!=null||!!t.sort),children:t.children?It(t.children):void 0};l.push(i)}return l}function tl(e,l){const a=B([]),t=B([]),s=B({}),r=B({}),i=B({});st(()=>{var w,g,x;const f=(e.headers||Object.keys(e.items[0]??{}).map(c=>({key:c,title:Wt(c)}))).slice(),v=_t(f);(w=l==null?void 0:l.groupBy)!=null&&w.value.length&&!v.has("data-table-group")&&f.unshift({key:"data-table-group",title:"Group"}),(g=l==null?void 0:l.showSelect)!=null&&g.value&&!v.has("data-table-select")&&f.unshift({key:"data-table-select"}),(x=l==null?void 0:l.showExpand)!=null&&x.value&&!v.has("data-table-expand")&&f.push({key:"data-table-expand"});const h=It(f);Ja(h);const m=Math.max(...h.map(c=>Ee(c)))+1,p=el(h,m);a.value=p.headers,t.value=p.columns;const b=p.headers.flat(1);for(const c of b)c.key&&(c.sortable&&(c.sort&&(s.value[c.key]=c.sort),c.sortRaw&&(r.value[c.key]=c.sortRaw)),c.filter&&(i.value[c.key]=c.filter))});const o={headers:a,columns:t,sortFunctions:s,sortRawFunctions:r,filterFunctions:i};return ne(Pt,o),o}function ke(){const e=se(Pt);if(!e)throw new Error("Missing headers!");return e}const Dt=O({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:z,default:"$sortAsc"},sortDescIcon:{type:z,default:"$sortDesc"},headerProps:{type:Object},...Re(),...qt()},"VDataTableHeaders"),Je=Q()({name:"VDataTableHeaders",props:Dt(),setup(e,l){let{slots:a}=l;const{t}=ie(),{toggleSort:s,sortBy:r,isSorted:i}=kt(),{someSelected:o,allSelected:d,selectAll:f,showSelectAll:v}=Se(),{columns:h,headers:m}=ke(),{loaderClasses:p}=Kt(e);function b(y,u){if(!(!e.sticky&&!y.fixed))return{position:"sticky",left:y.fixed?X(y.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${u})`:void 0}}function w(y){const u=r.value.find(I=>I.key===y.key);return u?u.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:g,backgroundColorStyles:x}=Xt(e,"color"),{displayClasses:c,mobile:F}=xe(e),L=D(()=>({headers:m.value,columns:h.value,toggleSort:s,isSorted:i,sortBy:r.value,someSelected:o.value,allSelected:d.value,selectAll:f,getSortIcon:w})),_=D(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},c.value,p.value]),G=y=>{let{column:u,x:I,y:P}=y;const T=u.key==="data-table-select"||u.key==="data-table-expand",R=M(e.headerProps??{},u.headerProps??{});return n(pe,M({tag:"th",align:u.align,class:[{"v-data-table__th--sortable":u.sortable&&!e.disableSort,"v-data-table__th--sorted":i(u),"v-data-table__th--fixed":u.fixed},..._.value],style:{width:X(u.width),minWidth:X(u.minWidth),maxWidth:X(u.maxWidth),...b(u,P)},colspan:u.colspan,rowspan:u.rowspan,onClick:u.sortable?()=>s(u):void 0,fixed:u.fixed,nowrap:u.nowrap,lastFixed:u.lastFixed,noPadding:T},R),{default:()=>{var K;const Y=`header.${u.key}`,le={column:u,selectAll:f,isSorted:i,toggleSort:s,sortBy:r.value,someSelected:o.value,allSelected:d.value,getSortIcon:w};return a[Y]?a[Y](le):u.key==="data-table-select"?((K=a["header.data-table-select"])==null?void 0:K.call(a,le))??(v.value&&n(Oe,{modelValue:d.value,indeterminate:o.value&&!d.value,"onUpdate:modelValue":f},null)):n("div",{class:"v-data-table-header__content"},[n("span",null,[u.title]),u.sortable&&!e.disableSort&&n(Ae,{key:"icon",class:"v-data-table-header__sort-icon",icon:w(u)},null),e.multiSort&&i(u)&&n("div",{key:"badge",class:["v-data-table-header__sort-badge",...g.value],style:x.value},[r.value.findIndex(J=>J.key===u.key)+1])])}})},q=()=>{const y=M(e.headerProps??{}??{}),u=D(()=>h.value.filter(P=>(P==null?void 0:P.sortable)&&!e.disableSort)),I=D(()=>{if(h.value.find(T=>T.key==="data-table-select")!=null)return d.value?"$checkboxOn":o.value?"$checkboxIndeterminate":"$checkboxOff"});return n(pe,M({tag:"th",class:[..._.value],colspan:m.value.length+1},y),{default:()=>[n("div",{class:"v-data-table-header__content"},[n(Ne,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:u.value,label:t("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:I.value,"onClick:append":()=>f(!d.value)},{...a,chip:P=>{var T;return n(Pa,{onClick:(T=P.item.raw)!=null&&T.sortable?()=>s(P.item.raw):void 0,onMousedown:R=>{R.preventDefault(),R.stopPropagation()}},{default:()=>[P.item.title,n(Ae,{class:["v-data-table__td-sort-icon",i(P.item.raw)&&"v-data-table__td-sort-icon-active"],icon:w(P.item.raw),size:"small"},null)]})}})])]})};ae(()=>F.value?n("tr",null,[n(q,null,null)]):n(te,null,[a.headers?a.headers(L.value):m.value.map((y,u)=>n("tr",null,[y.map((I,P)=>n(G,{column:I,x:P,y:u},null))])),e.loading&&n("tr",{class:"v-data-table-progress"},[n("th",{colspan:h.value.length},[n(Yt,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),al=O({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),ll=Q()({name:"VDataTableGroupHeaderRow",props:al(),setup(e,l){let{slots:a}=l;const{isGroupOpen:t,toggleGroup:s,extractRows:r}=mt(),{isSelected:i,isSomeSelected:o,select:d}=Se(),{columns:f}=ke(),v=D(()=>r([e.item]));return()=>n("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[f.value.map(h=>{var m,p;if(h.key==="data-table-group"){const b=t(e.item)?"$expand":"$next",w=()=>s(e.item);return((m=a["data-table-group"])==null?void 0:m.call(a,{item:e.item,count:v.value.length,props:{icon:b,onClick:w}}))??n(pe,{class:"v-data-table-group-header-row__column"},{default:()=>[n(E,{size:"small",variant:"text",icon:b,onClick:w},null),n("span",null,[e.item.value]),n("span",null,[U("("),v.value.length,U(")")])]})}if(h.key==="data-table-select"){const b=i(v.value),w=o(v.value)&&!b,g=x=>d(v.value,x);return((p=a["data-table-select"])==null?void 0:p.call(a,{props:{modelValue:b,indeterminate:w,"onUpdate:modelValue":g}}))??n("td",null,[n(Oe,{modelValue:b,indeterminate:w,"onUpdate:modelValue":g},null)])}return n("td",null,null)})])}}),nl=O({index:Number,item:Object,cellProps:[Object,Function],onClick:De(),onContextmenu:De(),onDblclick:De(),...Re()},"VDataTableRow"),sl=Q()({name:"VDataTableRow",props:nl(),setup(e,l){let{slots:a}=l;const{displayClasses:t,mobile:s}=xe(e,"v-data-table__tr"),{isSelected:r,toggleSelect:i,someSelected:o,allSelected:d,selectAll:f}=Se(),{isExpanded:v,toggleExpand:h}=ft(),{toggleSort:m,sortBy:p,isSorted:b}=kt(),{columns:w}=ke();ae(()=>n("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},t.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&w.value.map((g,x)=>{const c=e.item,F=`item.${g.key}`,L=`header.${g.key}`,_={index:e.index,item:c.raw,internalItem:c,value:he(c.columns,g.key),column:g,isSelected:r,toggleSelect:i,isExpanded:v,toggleExpand:h},G={column:g,selectAll:f,isSorted:b,toggleSort:m,sortBy:p.value,someSelected:o.value,allSelected:d.value,getSortIcon:()=>""},q=typeof e.cellProps=="function"?e.cellProps({index:_.index,item:_.item,internalItem:_.internalItem,value:_.value,column:g}):e.cellProps,y=typeof g.cellProps=="function"?g.cellProps({index:_.index,item:_.item,internalItem:_.internalItem,value:_.value}):g.cellProps;return n(pe,M({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,lastFixed:g.lastFixed,maxWidth:s.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:s.value?void 0:g.width},q,y),{default:()=>{var I,P,T,R,Y;if(a[F]&&!s.value)return(I=a[F])==null?void 0:I.call(a,_);if(g.key==="data-table-select")return((P=a["item.data-table-select"])==null?void 0:P.call(a,_))??n(Oe,{disabled:!c.selectable,modelValue:r([c]),onClick:$e(()=>i(c),["stop"])},null);if(g.key==="data-table-expand")return((T=a["item.data-table-expand"])==null?void 0:T.call(a,_))??n(E,{icon:v(c)?"$collapse":"$expand",size:"small",variant:"text",onClick:$e(()=>h(c),["stop"])},null);const u=ye(_.value);return s.value?n(te,null,[n("div",{class:"v-data-table__td-title"},[((R=a[L])==null?void 0:R.call(a,G))??g.title]),n("div",{class:"v-data-table__td-value"},[((Y=a[F])==null?void 0:Y.call(a,_))??u])]):u}})})]))}}),Tt=O({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Re()},"VDataTableRows"),et=Q()({name:"VDataTableRows",inheritAttrs:!1,props:Tt(),setup(e,l){let{attrs:a,slots:t}=l;const{columns:s}=ke(),{expandOnClick:r,toggleExpand:i,isExpanded:o}=ft(),{isSelected:d,toggleSelect:f}=Se(),{toggleGroup:v,isGroupOpen:h}=mt(),{t:m}=ie(),{mobile:p}=xe(e);return ae(()=>{var b,w;return e.loading&&(!e.items.length||t.loading)?n("tr",{class:"v-data-table-rows-loading",key:"loading"},[n("td",{colspan:s.value.length},[((b=t.loading)==null?void 0:b.call(t))??m(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?n("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[n("td",{colspan:s.value.length},[((w=t["no-data"])==null?void 0:w.call(t))??m(e.noDataText)])]):n(te,null,[e.items.map((g,x)=>{var L;if(g.type==="group"){const _={index:x,item:g,columns:s.value,isExpanded:o,toggleExpand:i,isSelected:d,toggleSelect:f,toggleGroup:v,isGroupOpen:h};return t["group-header"]?t["group-header"](_):n(ll,M({key:`group-header_${g.id}`,item:g},Ye(a,":group-header",()=>_)),t)}const c={index:x,item:g.raw,internalItem:g,columns:s.value,isExpanded:o,toggleExpand:i,isSelected:d,toggleSelect:f},F={...c,props:M({key:`item_${g.key??g.index}`,onClick:r.value?()=>{i(g)}:void 0,index:x,item:g,cellProps:e.cellProps,mobile:p.value},Ye(a,":row",()=>c),typeof e.rowProps=="function"?e.rowProps({item:c.item,index:c.index,internalItem:c.internalItem}):e.rowProps)};return n(te,{key:F.props.key},[t.item?t.item(F):n(sl,F.props,t),o(g)&&((L=t["expanded-row"])==null?void 0:L.call(t,c))])})])}),{}}}),Ct=O({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...rt(),...ot(),...it(),...ut()},"VTable"),tt=Q()({name:"VTable",props:Ct(),setup(e,l){let{slots:a,emit:t}=l;const{themeClasses:s}=dt(e),{densityClasses:r}=Zt(e);return ae(()=>n(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},s.value,r.value,e.class],style:e.style},{default:()=>{var i,o,d;return[(i=a.top)==null?void 0:i.call(a),a.default?n("div",{class:"v-table__wrapper",style:{height:X(e.height)}},[n("table",null,[a.default()])]):(o=a.wrapper)==null?void 0:o.call(a),(d=a.bottom)==null?void 0:d.call(a)]}})),{}}}),rl=O({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ol(e,l,a,t){const s=e.returnObject?l:fe(l,e.itemValue),r=fe(l,e.itemSelectable,!0),i=t.reduce((o,d)=>(d.key!=null&&(o[d.key]=fe(l,d.value)),o),{});return{type:"item",key:e.returnObject?fe(l,e.itemValue):s,index:a,value:s,selectable:r,columns:i,raw:l}}function il(e,l,a){return l.map((t,s)=>ol(e,t,s,a))}function ul(e,l){return{items:D(()=>il(e,e.items,l.value))}}const dl=O({...Tt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,..._a(),...Da(),...Xa(),...rl(),...Ma(),...Ga(),...Dt(),...Ct()},"DataTable"),cl=O({...$a(),...dl(),...ka(),...wt()},"VDataTable"),be=Q()({name:"VDataTable",props:cl(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const{groupBy:s}=Ta(e),{sortBy:r,multiSort:i,mustSort:o}=ja(e),{page:d,itemsPerPage:f}=La(e),{disableSort:v}=Qt(e),{columns:h,headers:m,sortFunctions:p,sortRawFunctions:b,filterFunctions:w}=tl(e,{groupBy:s,showSelect:N(e,"showSelect"),showExpand:N(e,"showExpand")}),{items:g}=ul(e,h),x=N(e,"search"),{filteredItems:c}=wa(e,g,x,{transform:Z=>Z.columns,customKeyFilter:w}),{toggleSort:F}=Ua({sortBy:r,multiSort:i,mustSort:o,page:d}),{sortByWithGroups:L,opened:_,extractRows:G,isGroupOpen:q,toggleGroup:y}=Ca({groupBy:s,sortBy:r,disableSort:v}),{sortedItems:u}=Wa(e,c,L,{transform:Z=>({...Z.raw,...Z.columns}),sortFunctions:p,sortRawFunctions:b}),{flatItems:I}=Fa(u,s,_),P=D(()=>I.value.length),{startIndex:T,stopIndex:R,pageCount:Y,setItemsPerPage:le}=Ra({page:d,itemsPerPage:f,itemsLength:P}),{paginatedItems:K}=Oa({items:I,startIndex:T,stopIndex:R,itemsPerPage:f}),J=D(()=>G(K.value)),{isSelected:we,select:Pe,selectAll:Ve,toggleSelect:A,someSelected:S,allSelected:H}=Ha(e,{allItems:g,currentPage:J}),{isExpanded:k,toggleExpand:C}=Ia(e);Aa({page:d,itemsPerPage:f,sortBy:r,groupBy:s,search:x}),Fe({VDataTableRows:{hideNoData:N(e,"hideNoData"),noDataText:N(e,"noDataText"),loading:N(e,"loading"),loadingText:N(e,"loadingText")}});const W=D(()=>({page:d.value,itemsPerPage:f.value,sortBy:r.value,pageCount:Y.value,toggleSort:F,setItemsPerPage:le,someSelected:S.value,allSelected:H.value,isSelected:we,select:Pe,selectAll:Ve,toggleSelect:A,isExpanded:k,toggleExpand:C,isGroupOpen:q,toggleGroup:y,items:J.value.map(Z=>Z.raw),internalItems:J.value,groupedItems:K.value,columns:h.value,headers:m.value}));return ae(()=>{const Z=Qe.filterProps(e),Bt=Je.filterProps(e),Ft=et.filterProps(e),At=tt.filterProps(e);return n(tt,M({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},At),{top:()=>{var re;return(re=t.top)==null?void 0:re.call(t,W.value)},default:()=>{var re,Me,He,Ge,je,Ue;return t.default?t.default(W.value):n(te,null,[(re=t.colgroup)==null?void 0:re.call(t,W.value),!e.hideDefaultHeader&&n("thead",{key:"thead"},[n(Je,Bt,t)]),(Me=t.thead)==null?void 0:Me.call(t,W.value),!e.hideDefaultBody&&n("tbody",null,[(He=t["body.prepend"])==null?void 0:He.call(t,W.value),t.body?t.body(W.value):n(et,M(a,Ft,{items:K.value}),t),(Ge=t["body.append"])==null?void 0:Ge.call(t,W.value)]),(je=t.tbody)==null?void 0:je.call(t,W.value),(Ue=t.tfoot)==null?void 0:Ue.call(t,W.value)])},bottom:()=>t.bottom?t.bottom(W.value):!e.hideDefaultFooter&&n(te,null,[n(oe,null,null),n(Qe,Z,{prepend:t["footer.prepend"]})])})}),{}}}),ue=e=>(da("data-v-bef17386"),e=e(),ca(),e),fl={class:"d-flex"},vl={class:"sidebar",style:{"margin-right":"12px","background-color":"white"}},ml=ue(()=>$("h3",{class:"mb-3"},"故事管理",-1)),gl={class:"content",style:{"background-color":"white"}},bl={class:"d-flex align-center justify-space-between mb-4"},yl=ue(()=>$("h3",null,"我的故事",-1)),hl=ue(()=>$("div",{class:"d-flex align-center justify-space-between mb-4"},[$("h3",null,"我的延續")],-1)),pl=ue(()=>$("div",{class:"d-flex align-center justify-space-between mb-4"},[$("h3",null,"收藏的故事")],-1)),xl={class:"d-flex align-center justify-space-between py-2"},Sl=ue(()=>$("div",{class:"d-flex align-center justify-space-between mb-4"},[$("h3",null,"已投票的故事")],-1)),kl={class:"d-flex align-center justify-space-between",style:{padding:"24px 24px 0px 24px"}},wl={class:"d-flex align-center"},Pl={class:"d-flex align-center"},Vl={__name:"management",props:{storyId:{type:String,required:!0}},setup(e){const l=B([{title:"首頁",disabled:!1,href:"/"},{title:"故事管理",disabled:!0,href:"/management"}]),{apiAuth:a}=na(),t=Jt(),s=ea(),r=B("option-1"),i=B(10),o=B([{key:"createdAt",order:"desc"}]),d=B(1),f=B(0),v=B([]),h=B([]),m=B(null),p=B({open:!1,id:""}),b=A=>{p.value.id=A._id,L.value.value=A.title,_.value.value=A.state,G.value.value=A.show,p.value.open=!0},w=()=>{p.value.open=!1,F()},g=fa({title:va().required("故事名稱必填"),state:Ke(),show:Ke()}),{handleSubmit:x,isSubmitting:c,resetForm:F}=ma({validationSchema:g,initialValues:{title:"",state:!0,show:!0}}),L=Be("title"),_=Be("state"),G=Be("show"),q=x(async A=>{var S,H,k;if(!((S=v.value[0])!=null&&S.error)&&!(p.value.id.length===0&&v.value.length<1))try{const C=new FormData;C.append("title",A.title),C.append("state",A.state),C.append("show",A.show),v.value.length>0&&C.append("image",v.value[0].file),await a.patch("/story/"+p.value.id,C),t({text:"新增成功",snackbarProps:{color:"green"}}),w(),P(!0)}catch(C){console.log(C),t({text:((k=(H=C==null?void 0:C.response)==null?void 0:H.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),y=[{title:"書封",align:"center",width:"160px",sortable:!1,key:"image"},{title:"書名",align:"start",width:"130px",key:"title"},{title:"狀態",align:"center",key:"state"},{title:"顯示",align:"center",key:"show",sortable:!1},{title:"收藏數",align:"center",key:"collectionNum"},{title:"追蹤數",align:"center",key:"followNum"},{title:"總票數",align:"center",key:"totalVotes"},{title:"編輯",align:"center",key:"actions",sortable:!1}],u=B([]),I=B([]),P=async()=>{var A,S,H,k;try{const{data:C}=await a.get("/story/all",{params:{page:d.value,itemsPerPage:i.value,sortBy:((A=o.value[0])==null?void 0:A.key)||"createdAt",sortOrder:((S=o.value[0])==null?void 0:S.order)||"desc"}});u.value.splice(0,u.value.length,...C.result.data),f.value=C.result.total}catch(C){console.log(C),t({text:((k=(H=C==null?void 0:C.response)==null?void 0:H.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red"}})}};P();const T=async()=>{var A,S;try{await a.delete("/story/"+p.value.id),t({text:"刪除成功",snackbarProps:{color:"green"}}),w(),P(!0)}catch(H){console.log(H),t({text:((S=(A=H==null?void 0:H.response)==null?void 0:A.data)==null?void 0:S.message)||"發生錯誤",snackbarProps:{color:"red"}})}},R=[{title:"書名",align:"start",width:"130px",key:"title"},{title:"狀態",align:"center",key:"state"},{title:"我的延續內容",align:"center",key:"latestContent"},{title:"總票數",align:"center",key:"totalVotes"}];(async()=>{const A=s.params.id;try{const S=await a.get(`/story/getExtension/${A}`);console.log(S),I.value=S.data}catch(S){console.error("Error fetching story extensions:",S)}})();const le=["文學小說","奇幻"],K=B([]),J=[{title:"類別",align:"start",sortable:!1,key:"category"},{title:"書名",key:"title",align:"start",sortable:!1},{title:"最新章節",key:"chapterName",align:"center",sortable:!1},{title:"最初作者",key:"author",align:"center",sortable:!1},{title:"總字數",key:"totalVotes",align:"center"},{title:"收藏數",key:"collectionNum",align:"center"}],we=B([{category:"文學小說",title:"想要讓人因此試著鍛煉成一個跟學生成員長很像的女生，結果我卻變成了她的僕人",chapterName:"後記——善良不需要很聰明",author:"新北工程師",totalWordCount:4,collectionNum:"1%"},{category:"奇幻",title:237,chapterName:9,author:37,totalWordCount:4333,collectionNum:"1%"}]),Pe=[{title:"書名",key:"title",align:"start",sortable:!1},{title:"投票記錄內容",key:"content",align:"center",sortable:!1},{title:"延續者",key:"supportAuthor",align:"center",sortable:!1},{title:"總票數",key:"totalVotes",align:"center"},{title:"編輯",align:"center",key:"actions",sortable:!1}],Ve=[{title:"想要讓人因此試著鍛煉成一個跟學生",content:"想要讓人因此試著鍛煉成一個跟學生想要讓人因此試著鍛煉成一個跟學生",supportAuthor:"阿北工程師",totalVotes:20,followNum:1e3}];return(A,S)=>{const H=ta("vue-file-agent");return sa(),aa(te,null,[n(ba,{style:{padding:"32px"}},{default:V(()=>[n(ya,{items:l.value,style:{padding:"0px 12px 16px 12px"}},{divider:V(()=>[n(Ae,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),$("div",fl,[$("div",vl,[n(xa,{class:"py-0",dense:""},{default:V(()=>[ml,n(Sa,{class:"d-flex"},{default:V(()=>[n(ha,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=k=>r.value=k),color:"primary",direction:"vertical"},{default:V(()=>[n(ve,{class:"my-1","prepend-icon":"mdi-book",text:"我的故事",value:"option-1"}),n(ve,{class:"my-1","prepend-icon":"mdi-book",text:"我的延續",value:"option-2"}),n(ve,{class:"my-1","prepend-icon":"mdi-bookmark",text:"收藏的故事",value:"option-3"}),n(ve,{class:"my-1","prepend-icon":"mdi-vote",text:"已投票的故事",value:"option-4"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),$("div",gl,[n(pa,{modelValue:r.value,"onUpdate:modelValue":S[8]||(S[8]=k=>r.value=k)},{default:V(()=>[n(me,{value:"option-1"},{default:V(()=>[$("div",bl,[yl,n(E,{"prepend-icon":"mdi-plus",size:"small",to:"/createStory"},{default:V(()=>[U("新增故事")]),_:1})]),n(oe),n(Te,{flat:""},{default:V(()=>[n(Ce,null,{default:V(()=>[n(be,{"items-per-page":i.value,"onUpdate:itemsPerPage":[S[1]||(S[1]=k=>i.value=k),S[4]||(S[4]=k=>P(!1))],"sort-by":o.value,"onUpdate:sortBy":[S[2]||(S[2]=k=>o.value=k),S[5]||(S[5]=k=>P(!1))],page:d.value,"onUpdate:page":[S[3]||(S[3]=k=>d.value=k),S[6]||(S[6]=k=>P(!1))],headers:y,items:u.value,"items-length":f.value,density:"comfortable","item-key":"name"},{"item.image":V(({value:k})=>[n(ra,{src:k,"max-height":"100px",class:"py-1"},null,8,["src"])]),"item.state":V(({item:k})=>[$("span",null,ye(k.state?"完結":"連載"),1)]),"item.show":V(({item:k})=>[$("span",null,ye(k.show?"公開":"隱藏"),1)]),"item.actions":V(({item:k})=>[n(E,{text:"",to:"",active:!1,ripple:!1,variant:"tonal",onClick:C=>b(k)},{default:V(()=>[U(" 編輯 ")]),_:2},1032,["onClick"])]),_:2},1032,["items-per-page","sort-by","page","items","items-length"])]),_:1})]),_:1})]),_:1}),n(me,{value:"option-2"},{default:V(()=>[hl,n(oe),n(Te,{flat:""},{default:V(()=>[n(Ce,null,{default:V(()=>[n(be,{headers:R,items:I.value,density:"comfortable","item-key":"name"},{"item.state":V(({item:k})=>[$("span",null,ye(k.state?"完結":"連載"),1)]),"item.actions":V(({item:k})=>[n(E,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:V(()=>[U(" 刪除紀錄 ")]),_:1})]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}),n(me,{value:"option-3"},{default:V(()=>[pl,n(oe),$("div",xl,[n(E,{size:"small"},{default:V(()=>[U("移除")]),_:1}),n(Ne,{dense:"",density:"comfortable",label:"故事分類","hide-details":"","max-width":"150px",items:le})]),n(be,{modelValue:K.value,"onUpdate:modelValue":S[7]||(S[7]=k=>K.value=k),headers:J,items:we.value,"show-select":"","item-value":"title"},null,8,["modelValue","items"])]),_:1}),n(me,{value:"option-4"},{default:V(()=>[Sl,n(oe),n(be,{density:"comfortable","item-key":"name",headers:Pe,items:Ve},{"item.actions":V(({item:k})=>[n(E,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:V(()=>[U(" 刪除紀錄 ")]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),n(la,{modelValue:p.value.open,"onUpdate:modelValue":S[15]||(S[15]=k=>p.value.open=k),persistent:"",width:"500"},{default:V(()=>[n(Va,{onSubmit:$e(j(q),["prevent"]),disabled:j(c)},{default:V(()=>[n(Te,null,{default:V(()=>[$("div",kl,[n(oa,{class:"px-0"},{default:V(()=>[U("編輯")]),_:1}),n(E,{style:{"background-color":"#f24e1e",color:"white"},onClick:S[9]||(S[9]=k=>T())},{default:V(()=>[U("刪除故事")]),_:1})]),n(Ce,null,{default:V(()=>[n(ia,{label:"書名",modelValue:j(L).value.value,"onUpdate:modelValue":S[10]||(S[10]=k=>j(L).value.value=k),"error-messages":j(L).errorMessage.value},null,8,["modelValue","error-messages"]),n(qe,{class:"me-4 mb-0"},{default:V(()=>[U("故事狀態")]),_:1}),n(Xe,{class:"d-flex align-center",row:"","hide-details":"",modelValue:j(_).value.value,"onUpdate:modelValue":S[11]||(S[11]=k=>j(_).value.value=k),"error-messages":j(_).errorMessage.value},{default:V(()=>[$("div",wl,[n(ge,{label:"完結",value:!0,class:"me-4"}),n(ge,{label:"連載中",value:!1,style:{flex:"none"}})])]),_:1},8,["modelValue","error-messages"]),n(qe,{class:"me-4 mb-0"},{default:V(()=>[U("顯示方式")]),_:1}),n(Xe,{class:"d-flex align-center",row:"","hide-details":"",modelValue:j(G).value.value,"onUpdate:modelValue":S[12]||(S[12]=k=>j(G).value.value=k),"error-messages":j(G).errorMessage.value},{default:V(()=>[$("div",Pl,[n(ge,{label:"公開",value:!0,class:"me-4"}),n(ge,{label:"隱藏",value:!1})])]),_:1},8,["modelValue","error-messages"]),n(H,{modelValue:v.value,"onUpdate:modelValue":S[13]||(S[13]=k=>v.value=k),"raw-model-value":h.value,"onUpdate:rawModelValue":S[14]||(S[14]=k=>h.value=k),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:m},null,8,["modelValue","raw-model-value"])]),_:1}),n(ua,null,{default:V(()=>[n(E,{color:"red",loading:j(c),onClick:w},{default:V(()=>[U("取消")]),_:1},8,["loading"]),n(E,{color:"green",type:"submit",loading:j(c)},{default:V(()=>[U("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])],64)}}},El=ga(Vl,[["__scopeId","data-v-bef17386"]]);export{El as default};
