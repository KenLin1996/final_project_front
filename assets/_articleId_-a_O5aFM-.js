import{x as b,o as a,R as N,S as V,T as r,a4 as n,_ as i,a5 as k,c as d,W as p,U as v,ac as B,O as R,P as S}from"./index-BY3GcDCi.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as P}from"./VContainer-BD8nR6F0.js";const T={class:"text-center"},z={__name:"[articleId]",setup(A){const{api:x}=B(),m=R(),C=S(),s=b({content:[]}),l=a(()=>m.params.id),_=a(()=>m.params.articleId),c=a(()=>s.value.content.find(e=>e._id===_.value)),f=a(()=>{var e;return((e=c.value)==null?void 0:e.content.join(""))||""}),u=a(()=>s.value.content.findIndex(e=>e._id===_.value)),y=a(()=>u.value>0),I=a(()=>u.value<s.value.content.length-1),h=e=>{const t=u.value+e;if(t>=0&&t<s.value.content.length){const o=s.value.content[t]._id;C.push(`/stories/${l.value}/articles/${o}`)}},w=async()=>{var e;try{const{data:t}=await x.get(`/story/${l.value}`);s.value=t.result,document.title=`界筆 | ${((e=c.value)==null?void 0:e.chapterName)||"錯誤章節"}`}catch(t){console.error("加載故事失敗:",t)}},g=a(()=>{const e=f.value.length;return e>1e3?"long-content":e<300?"short-content":""});return w(),(e,t)=>(N(),V(P,{class:"d-flex flex-column justify-space-between pa-8"},{default:r(()=>{var o;return[n("div",null,[n("h3",null,i(s.value.title),1),n("h2",null,i((o=c.value)==null?void 0:o.chapterName),1),n("p",{class:k(["my-4 white-space-pre-line word-wrap-break-word",g.value])},i(f.value),3)]),n("div",T,[d(v,{class:"mx-2",onClick:t[0]||(t[0]=$=>h(-1)),disabled:!y.value},{default:r(()=>[p("上一章")]),_:1},8,["disabled"]),d(v,{class:"mx-2",to:`/stories/${l.value}`,color:"primary"},{default:r(()=>[p("回故事頁")]),_:1},8,["to"]),d(v,{class:"mx-2",onClick:t[1]||(t[1]=$=>h(1)),disabled:!I.value},{default:r(()=>[p("下一章")]),_:1},8,["disabled"])])]}),_:1}))}},W=j(z,[["__scopeId","data-v-f9dc6c34"]]);export{W as default};
