import{x as d,o as I,Q as te,R as u,S as W,T as s,a4 as l,c as t,W as r,U as k,ad as ae,ae as se,X as _,Z as v,Y as h,ac as le,a5 as T,_ as o,a7 as oe,V as ne,a9 as ce,aa as ue,a8 as re,af as ie,$ as de,ag as me,ah as pe}from"./index-B1ySa3vZ.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _e}from"./VContainer-CgMUdhVE.js";import{V as b}from"./VDivider-BhPiY8Mx.js";import{V as g,a as x}from"./VRow-aRsc4bx-.js";import{a as ve,V as A}from"./VChip-BqS4VQXF.js";import{V as he}from"./VPagination-BLE6Qbxc.js";import"./VSlideGroup-CHpiL728.js";const V=y=>(me("data-v-3ddc05e6"),y=y(),pe(),y),be={class:"d-flex justify-space-between align-center"},ge=V(()=>l("h2",null,"故事分類",-1)),xe=V(()=>l("h3",null,"作品分類",-1)),Ve=V(()=>l("h3",null,"作品字數",-1)),Ce=V(()=>l("h3",null,"作品狀態",-1)),ke={class:"d-flex justify-space-between align-cente"},ye=V(()=>l("h3",null,"標籤選擇",-1)),we={class:"mr-4",style:{"font-weight":"bolder",color:"black"}},Se={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Le={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Ie=V(()=>l("p",{style:{"font-weight":"bolder",color:"black"}},"最新內容：",-1)),B=3,We={__name:"category",setup(y){const m=d([]),C=d(""),p=d(""),f=d(""),i=d(""),w=d(1),{api:U}=le(),S=d([]),$=["愛情","奇幻玄幻","科幻未來","驚悚推理","靈異恐怖","武俠仙俠","都市","LGBTQ+","勵志成長","幽默諷喻","影視","同人","網遊","歷史傳記","軍事戰爭","生活風格","親子共享","藝術設計","科普","商業理財","文藝評論","其他"],F=["不限","50字以下","1000字以下","2萬字以內","2萬-5萬字","5萬-10萬字","10萬-30萬字","30萬-60萬字","60萬-100萬字","100萬字以上"],N=["不限","連載","完結"],Q=["不限","戀愛","異界","校園","戰鬥","冒險","魔法","異能","超能力","超自然","重生","穿越","爽文/輕鬆","搞笑","虐心","復仇","靈異神怪","暗黑","恐怖","奇幻","異世界轉生","逆襲","未來世界","英雄","百合","同志","日常","科幻","成長","家庭","友情","偵探","職場","青梅竹馬","後宮","妖怪","節操","二創","悲劇","喜劇","異國","輕小說","心理","神話","蒸汽龐克","時間旅行","機器人","人工智能","動物"];(async()=>{try{const{data:a}=await U.get("/story");S.value=a.result.data||[]}catch(a){console.error(a),S.value=[]}})();const D=a=>{p.value=p.value===a?"":a},G=a=>{f.value=f.value===a?"":a},z=a=>{i.value=i.value===a?"":a},E=()=>{m.value=[]},M=a=>{switch(a){case"50字以下":return{min:0,max:50};case"1000字以下":return{min:51,max:1e3};case"2萬字以內":return{min:1001,max:2e4};case"2萬-5萬字":return{min:20001,max:5e4};case"5萬-10萬字":return{min:50001,max:1e5};case"10萬-30萬字":return{min:100001,max:3e5};case"30萬-60萬字":return{min:300001,max:6e5};case"60萬-100萬字":return{min:600001,max:1e6};case"100萬字以上":return{min:1000001,max:1/0};default:return{min:0,max:1/0}}},P=I(()=>S.value.filter(a=>{var R;if(!a)return!1;const n=C.value?C.value.toLowerCase():"",L=a.title?a.title.toLowerCase().includes(n):!1,e=(R=a.mainAuthor)!=null&&R.username?a.mainAuthor.username.toLowerCase().includes(n):!1,c=p.value?a.category===p.value:!0,j=M(f.value),q=f.value?a.totalWordCount>=j.min&&a.totalWordCount<=j.max:!0,H=a.state?"完結":"連載",J=i.value?i.value==="不限"||H===i.value:!0,K=m.value.length?m.value.every(ee=>a.chapterLabels.includes(ee)):!0;return(L||e)&&c&&q&&J&&K})),O=()=>{C.value="",m.value=[],p.value="",f.value="",i.value=""},X=I(()=>Math.ceil(P.value.length/B)),Y=I(()=>{const a=(w.value-1)*B;return P.value.slice(a,a+B)}),Z=a=>{w.value=a};return(a,n)=>{const L=te("router-link");return u(),W(_e,{style:{padding:"32px"}},{default:s(()=>[l("div",be,[ge,t(k,{onClick:O,class:"custom-reset-btn"},{default:s(()=>[r("重設所有篩選")]),_:1})]),t(b,{class:"custom-mb-5"}),t(se,{class:"my-5"},{default:s(()=>[t(ae,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=e=>C.value=e),label:"搜尋","prepend-inner-icon":"mdi-magnify",density:"compact","hide-details":"","single-line":"",variant:"solo",clearable:"",color:"black"},null,8,["modelValue"])]),_:1}),xe,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v($,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:T([{"custom-btn":!0,selected:p.value===e},"my-1 mr-1"]),onClick:c=>D(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ve,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(F,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:T(["mr-1 my-1",{"custom-btn":!0,selected:f.value===e}]),onClick:c=>G(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ce,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(N,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:T(["mr-1",{"custom-btn":!0,selected:i.value===e}]),onClick:c=>z(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),l("div",ke,[ye,t(k,{onClick:E,class:"custom-reset-btn"},{default:s(()=>[r("重設標籤")]),_:1})]),t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[t(ve,{column:"","selected-class":"text-primary",multiple:"",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e)},{default:s(()=>[(u(),_(h,null,v(Q,e=>t(A,{key:e,text:e,class:"custom-chip d-flex align-center justify-center",elevation:"2",value:e},null,8,["text","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(u(!0),_(h,null,v(Y.value,e=>(u(),W(L,{key:e.id,to:"/stories/"+e._id,style:{"text-decoration":"none"}},{default:s(()=>[t(oe,{style:{border:"1px solid black",margin:"15px"}},{default:s(()=>[t(g,{"no-gutters":""},{default:s(()=>[t(x,{cols:"2",class:"pt-4 pb-4 pl-4"},{default:s(()=>[t(ne,{src:e.image,width:"200px",height:"150px",cover:""},null,8,["src"])]),_:2},1024),t(x,{cols:"10"},{default:s(()=>[t(g,{"no-gutters":""},{default:s(()=>[t(x,{class:"mt-4"},{default:s(()=>[t(ce,{class:"d-flex justify-space-between pt-0"},{default:s(()=>[l("span",null,o(e.title),1),t(A,{style:{"border-radius":"4px",padding:"0px 12px",border:"1px solid black","background-color":"rgba(151, 216, 196, 0.4)",color:"black","font-weight":"bold"}},{default:s(()=>[r(o(e.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(ue,null,{default:s(()=>[l("div",null,[l("span",we,"初創者："+o(e.mainAuthor.username),1)]),l("p",Se," 作品字數："+o(e.totalWordCount),1),l("p",Le," 作品狀態："+o(e.state?"完結":"連載"),1),Ie]),_:2},1024),t(re,{class:"text py-1",style:{"font-weight":"500"}},{default:s(()=>{var c;return[r(o((c=e.content[e.content.length-1])==null?void 0:c.content.join("")),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),t(b,{style:{color:"black"}}),t(ie,{class:"px-4 py-1"},{default:s(()=>[t(de,{class:"mr-2"},{default:s(()=>[r("mdi-label-outline")]),_:1}),(u(!0),_(h,null,v(e.chapterLabels,c=>(u(),W(A,{class:"mr-2",style:{"border-radius":"4px"}},{default:s(()=>[r("#"+o(c),1)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128)),t(he,{modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=e=>w.value=e),length:X.value,onInput:Z,class:"my-4"},null,8,["modelValue","length"])]),_:1})}}},Ne=fe(We,[["__scopeId","data-v-3ddc05e6"]]);export{Ne as default};
