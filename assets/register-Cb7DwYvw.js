import{a2 as U,N as $,x as y,O as q,Q as A,R as l,ac as B,P as I,c as e,V as N,S as u,T as d,aa as R,$ as a,ab as m}from"./index-BQtH6iZV.js";import{c as T,a as c,f as z,u as E,b as p}from"./vee-validate.esm-DhJukTDA.js";import{v as x}from"./index-Dz1q7DHj.js";import{V as h}from"./VContainer-BM79zw4O.js";import{V as O,a as k}from"./VRow-BcLcHuOe.js";import{V as D}from"./VDivider-C5116G8z.js";import{V as G}from"./VForm-Cowh1Gba.js";const Z={__name:"register",setup(Q){const{api:_}=B(),C=U(),V=$(),P=T({email:c().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",r=>x.isEmail(r)),username:c().required("使用者暱稱必填").min(1,"使用者暱稱長度不符").max(20,"使用者暱稱長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>x.isAlphanumeric(r)),password:c().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:c().oneOf([z("password")],"密碼不一致")}),{handleSubmit:S,isSubmitting:w}=E({validationSchema:P}),f=p("email"),g=p("username"),v=p("password"),b=p("passwordConfirm"),t=y(!1),n=y(!1),j=()=>{t.value=!t.value},F=()=>{n.value=!n.value},M=S(async r=>{var s,i;try{await _.post("/user",{email:r.email,username:r.username,password:r.password}),V({text:"註冊成功",snackbarProps:{color:"green"}}),C.push("/")}catch(o){console.log(o),V({text:((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,s)=>{const i=q("router-link");return I(),A(h,{class:"d-flex align-center justify-center h-100",fluid:""},{default:l(()=>[e(h,{class:"text-center pa-8 rounded-lg elevation-4",style:{width:"500px","background-color":"white",border:"1px solid rgba(255, 255, 255, 0.1)"}},{default:l(()=>[e(O,{class:"d-flex flex-column justify-center"},{default:l(()=>[e(k,{class:"d-flex flex-column justify-center align-center my-2"},{default:l(()=>[e(i,{to:"/"},{default:l(()=>[e(N,{class:"my-2",width:100,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1}),e(u,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"my-2 elevation-1 w-66 h-25",variant:"plain",to:"/login"},{default:l(()=>[d(" 使用 Google 註冊 ")]),_:1}),e(u,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000",size:"default","prepend-icon":"mdi-facebook",class:"my-2 elevation-1 w-66 h-25",variant:"plain",to:"/login"},{default:l(()=>[d(" 使用 Facebook 註冊 ")]),_:1})]),_:1}),e(D,{class:"my-2"}),e(k,{cols:"12"},{default:l(()=>[e(G,{onSubmit:R(a(M),["prevent"]),disabled:a(w)},{default:l(()=>[e(m,{label:"信箱",type:"email",modelValue:a(f).value.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a(f).value.value=o),"error-messages":a(f).errorMessage.value},null,8,["modelValue","error-messages"]),e(m,{label:"暱稱",minlength:"3",maxlength:"20",counter:"",modelValue:a(g).value.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a(g).value.value=o),"error-messages":a(g).errorMessage.value},null,8,["modelValue","error-messages"]),e(m,{label:"密碼",type:t.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(v).value.value,"onUpdate:modelValue":s[2]||(s[2]=o=>a(v).value.value=o),"error-messages":a(v).errorMessage.value,"append-inner-icon":t.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":j},null,8,["type","modelValue","error-messages","append-inner-icon"]),e(m,{label:"確認密碼",type:n.value?"text":"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(b).value.value,"onUpdate:modelValue":s[3]||(s[3]=o=>a(b).value.value=o),"error-messages":a(b).errorMessage.value,"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":F},null,8,["type","modelValue","error-messages","append-inner-icon"]),e(u,{type:"submit",outlined:"",border:"",style:{"background-color":"#f4b942","font-weight":"bold","font-size":"16px"},color:"#000000",class:"my-4 elevation-1 w-33",variant:"solo",loading:a(w)},{default:l(()=>[d(" 註冊 ")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"]),e(u,{class:"",ripple:!1,variant:"plain",to:"/login"},{default:l(()=>[d(" 登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Z as default};
