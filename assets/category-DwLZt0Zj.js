import{x as d,o as I,a6 as te,a7 as u,aa as P,ac as s,ad as l,c as t,ae as r,J as k,au as ae,av as se,a8 as _,ag as v,P as h,at as le,am as W,ah as o,ao as oe,V as ne,aq as ce,ar as ue,ap as re,aw as ie,ak as de,ax as me,ay as pe}from"./index-DlyiLitO.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _e}from"./VContainer-B6riO3XD.js";import{V as b}from"./VDivider-CHu22zbJ.js";import{a as g,V as x}from"./VRow-Co7jhYsb.js";import{a as ve,V as A}from"./VChip-D7PB308L.js";import{V as he}from"./VPagination-BS3e1qmh.js";import"./VSlideGroup-D-_92CCE.js";const V=y=>(me("data-v-5c249aba"),y=y(),pe(),y),be={class:"d-flex justify-space-between align-center"},ge=V(()=>l("h2",null,"故事分類",-1)),xe=V(()=>l("h3",null,"作品分類",-1)),Ve=V(()=>l("h3",null,"作品字數",-1)),Ce=V(()=>l("h3",null,"作品狀態",-1)),ke={class:"d-flex justify-space-between align-cente"},ye=V(()=>l("h3",null,"標籤選擇",-1)),we={class:"mr-4",style:{"font-weight":"bolder",color:"black"}},Se={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Le={class:"mb-2",style:{"font-weight":"bolder",color:"black"}},Ie=V(()=>l("p",{style:{"font-weight":"bolder",color:"black"}},"最新內容：",-1)),B=3,Pe={__name:"category",setup(y){const m=d([]),C=d(""),p=d(""),f=d(""),i=d(""),w=d(1),{api:N}=le(),S=d([]),R=["愛情","奇幻玄幻","科幻未來","驚悚推理","靈異恐怖","武俠仙俠","都市","心情抒發","LGBTQ+","勵志成長","幽默諷喻","影視","同人","網遊","歷史傳記","軍事戰爭","生活風格","親子共享","藝術設計","科普","商業理財","文藝評論","其他"],U=["不限","50字以下","1000字以下","2萬字以內","2萬-5萬字","5萬-10萬字","10萬-30萬字","30萬-60萬字","60萬-100萬字","100萬字以上"],$=["不限","連載","完結"],D=["不限","戀愛","異界","校園","戰鬥","冒險","魔法","異能","超能力","超自然","重生","穿越","爽文/輕鬆","搞笑","虐心","復仇","靈異神怪","暗黑","恐怖","奇幻","異世界轉生","逆襲","未來世界","英雄","百合","同志","日常","科幻","成長","家庭","友情","偵探","職場","青梅竹馬","後宮","妖怪","節操","二創","悲劇","喜劇","異國","輕小說","心理","神話","蒸汽龐克","時間旅行","機器人","人工智能","動物","快樂","悲傷","焦慮","平靜","懷舊","希望","孤獨","愛","失落","感激","興奮","迷惘","安慰","熱情","自在"];(async()=>{try{const{data:a}=await N.get("/story");S.value=a.result.data||[]}catch(a){console.error(a),S.value=[]}})();const G=a=>{p.value=p.value===a?"":a},Q=a=>{f.value=f.value===a?"":a},q=a=>{i.value=i.value===a?"":a},z=()=>{m.value=[]},E=a=>{switch(a){case"50字以下":return{min:0,max:50};case"1000字以下":return{min:51,max:1e3};case"2萬字以內":return{min:1001,max:2e4};case"2萬-5萬字":return{min:20001,max:5e4};case"5萬-10萬字":return{min:50001,max:1e5};case"10萬-30萬字":return{min:100001,max:3e5};case"30萬-60萬字":return{min:300001,max:6e5};case"60萬-100萬字":return{min:600001,max:1e6};case"100萬字以上":return{min:1000001,max:1/0};default:return{min:0,max:1/0}}},T=I(()=>S.value.filter(a=>{var F;if(!a)return!1;const n=C.value?C.value.toLowerCase():"",L=a.title?a.title.toLowerCase().includes(n):!1,e=(F=a.mainAuthor)!=null&&F.username?a.mainAuthor.username.toLowerCase().includes(n):!1,c=p.value?a.category===p.value:!0,j=E(f.value),K=f.value?a.totalWordCount>=j.min&&a.totalWordCount<=j.max:!0,X=a.state?"完結":"連載",Y=i.value?i.value==="不限"||X===i.value:!0,Z=m.value.length?m.value.every(ee=>a.chapterLabels.includes(ee)):!0;return(L||e)&&c&&K&&Y&&Z})),J=()=>{C.value="",m.value=[],p.value="",f.value="",i.value=""},M=I(()=>Math.ceil(T.value.length/B)),O=I(()=>{const a=(w.value-1)*B;return T.value.slice(a,a+B)}),H=a=>{w.value=a};return(a,n)=>{const L=te("router-link");return u(),P(_e,{style:{padding:"32px"}},{default:s(()=>[l("div",be,[ge,t(k,{onClick:J,class:"custom-reset-btn"},{default:s(()=>[r("重設所有篩選")]),_:1})]),t(b,{class:"custom-mb-5"}),t(se,{class:"my-5"},{default:s(()=>[t(ae,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=e=>C.value=e),label:"搜尋","prepend-inner-icon":"mdi-magnify",density:"compact","hide-details":"","single-line":"",variant:"solo",clearable:"",color:"black"},null,8,["modelValue"])]),_:1}),xe,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(R,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W([{"custom-btn":!0,selected:p.value===e},"my-1 mr-1"]),onClick:c=>G(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ve,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v(U,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W(["mr-1 my-1",{"custom-btn":!0,selected:f.value===e}]),onClick:c=>Q(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),Ce,t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[(u(),_(h,null,v($,e=>t(x,{key:e,cols:"auto"},{default:s(()=>[t(k,{class:W(["mr-1",{"custom-btn":!0,selected:i.value===e}]),onClick:c=>q(e)},{default:s(()=>[r(o(e),1)]),_:2},1032,["class","onClick"])]),_:2},1024)),64))]),_:1}),l("div",ke,[ye,t(k,{onClick:z,class:"custom-reset-btn"},{default:s(()=>[r("重設標籤")]),_:1})]),t(b,{class:"custom-mb-5"}),t(g,{class:"custom-mb-5","no-gutters":""},{default:s(()=>[t(ve,{column:"","selected-class":"text-primary",multiple:"",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e)},{default:s(()=>[(u(),_(h,null,v(D,e=>t(A,{key:e,text:e,class:"custom-chip d-flex align-center justify-center",elevation:"2",value:e},null,8,["text","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(u(!0),_(h,null,v(O.value,e=>(u(),P(L,{key:e.id,to:"/stories/"+e._id,style:{"text-decoration":"none"}},{default:s(()=>[t(oe,{style:{border:"1px solid black",margin:"15px"}},{default:s(()=>[t(g,{"no-gutters":""},{default:s(()=>[t(x,{cols:"2",class:"pt-4 pb-4 pl-4"},{default:s(()=>[t(ne,{src:e.image,width:"200px",height:"150px",cover:""},null,8,["src"])]),_:2},1024),t(x,{cols:"10"},{default:s(()=>[t(g,{"no-gutters":""},{default:s(()=>[t(x,{class:"mt-4"},{default:s(()=>[t(ce,{class:"d-flex justify-space-between pt-0"},{default:s(()=>[l("span",null,o(e.title),1),t(A,{style:{"border-radius":"4px",padding:"0px 12px",border:"1px solid black","background-color":"rgba(151, 216, 196, 0.4)",color:"black","font-weight":"bold"}},{default:s(()=>[r(o(e.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(ue,null,{default:s(()=>[l("div",null,[l("span",we,"初創者："+o(e.mainAuthor.username),1)]),l("p",Se," 作品字數："+o(e.totalWordCount),1),l("p",Le," 作品狀態："+o(e.state?"完結":"連載"),1),Ie]),_:2},1024),t(re,{class:"text py-1",style:{"font-weight":"500"}},{default:s(()=>{var c;return[r(o((c=e.content[e.content.length-1])==null?void 0:c.content.join("")),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),t(b,{style:{color:"black"}}),t(ie,{class:"px-4 py-1"},{default:s(()=>[t(de,{class:"mr-2"},{default:s(()=>[r("mdi-label-outline")]),_:1}),(u(!0),_(h,null,v(e.chapterLabels,c=>(u(),P(A,{class:"mr-2",style:{"border-radius":"4px"}},{default:s(()=>[r("#"+o(c),1)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128)),t(he,{modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=e=>w.value=e),length:M.value,onInput:H,class:"mt-5",density:"compact"},null,8,["modelValue","length"])]),_:1})}}},$e=fe(Pe,[["__scopeId","data-v-5c249aba"]]);export{$e as default};
