import{aR as Rt,p as H,t as E,D as se,av as de,am as ce,x as A,o as D,aS as pe,aT as ot,z as it,aU as ut,H as dt,y as Be,aJ as Ae,aC as me,aV as ge,aW as Lt,aq as X,b as Ot,m as ct,aX as ft,d as Et,e as Ht,aY as Mt,a as vt,f as mt,aZ as jt,g as ae,n as Gt,l as gt,a_ as ke,s as Ut,q as Le,I as Wt,a$ as be,u as oe,c as l,S as N,G as M,b0 as Qe,aF as Xe,b1 as zt,v as ee,b2 as qt,b3 as Kt,b4 as je,b5 as Qt,b6 as Xt,h as Yt,b7 as Zt,W as re,Z as Oe,T as R,b8 as Ne,aa as Ee,Y as He,b9 as Jt,ba as ye,bb as ea,N as ta,O as aa,U as la,R as p,a9 as na,ac as sa,P as ra,a0 as T,a5 as fe,a4 as ve,V as oa,ai as Ye,ab as $e,$ as G,a3 as ia,aQ as Ze,a6 as ua,ad as da,ae as ca}from"./index-BQtH6iZV.js";import{c as fa,a as va,e as Je,u as ma,b as Re}from"./vee-validate.esm-DhJukTDA.js";import{_ as ga}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ba}from"./VContainer-BM79zw4O.js";import{V as ya,a as ha,b as ie,c as pa,d as ue}from"./VTabs-lB28YSLF.js";import{V as xa,a as ka}from"./VList-CT45dZ_r.js";import{V as J}from"./VDivider-C5116G8z.js";import{d as Q,c as Ge,m as wa,u as Sa,e as et,f as he}from"./VRadioGroup-8Dx4yp00.js";import{V as Pa}from"./VChip-CvazLWZ2.js";import{V as _a}from"./VForm-Cowh1Gba.js";import"./VSlideGroup-ClZW227d.js";import"./VMenu-DcIoYLm7.js";import"./VSelectionControl-BQPrHjww.js";function tt(e,n,a){return Object.keys(e).filter(t=>Rt(t)&&t.endsWith(n)).reduce((t,s)=>(t[s.slice(0,-n.length)]=r=>e[s](r,a(r)),t),{})}const Va=H({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),bt=Symbol.for("vuetify:datatable:expanded");function Ia(e){const n=E(e,"expandOnClick"),a=se(e,"expanded",e.expanded,o=>new Set(o),o=>[...o.values()]);function t(o,c){const d=new Set(a.value);c?d.add(o.value):d.delete(o.value),a.value=d}function s(o){return a.value.has(o.value)}function r(o){t(o,!s(o))}const i={expand:t,expanded:a,expandOnClick:n,isExpanded:s,toggleExpand:r};return de(bt,i),i}function yt(){const e=ce(bt);if(!e)throw new Error("foo");return e}const Da=H({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),ht=Symbol.for("vuetify:data-table-group");function Ta(e){return{groupBy:se(e,"groupBy")}}function Ca(e){const{disableSort:n,groupBy:a,sortBy:t}=e,s=A(new Set),r=D(()=>a.value.map(m=>({...m,order:m.order??!1})).concat(n!=null&&n.value?[]:t.value));function i(m){return s.value.has(m.id)}function o(m){const x=new Set(s.value);i(m)?x.delete(m.id):x.add(m.id),s.value=x}function c(m){function x(f){const S=[];for(const b of f.items)"type"in b&&b.type==="group"?S.push(...x(b)):S.push(b);return S}return x({type:"group",items:m,id:"dummy",key:"dummy",value:"dummy",depth:0})}const d={sortByWithGroups:r,toggleGroup:o,opened:s,groupBy:a,extractRows:c,isGroupOpen:i};return de(ht,d),d}function pt(){const e=ce(ht);if(!e)throw new Error("Missing group!");return e}function Fa(e,n){if(!e.length)return[];const a=new Map;for(const t of e){const s=pe(t.raw,n);a.has(s)||a.set(s,[]),a.get(s).push(t)}return a}function xt(e,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const s=Fa(e,n[0]),r=[],i=n.slice(1);return s.forEach((o,c)=>{const d=n[0],m=`${t}_${d}_${c}`;r.push({depth:a,id:m,key:d,value:c,items:i.length?xt(o,i,a+1,m):o,type:"group"})}),r}function kt(e,n){const a=[];for(const t of e)"type"in t&&t.type==="group"?(t.value!=null&&a.push(t),(n.has(t.id)||t.value==null)&&a.push(...kt(t.items,n))):a.push(t);return a}function Ba(e,n,a){return{flatItems:D(()=>{if(!n.value.length)return e.value;const s=xt(e.value,n.value.map(r=>r.key));return kt(s,a.value)})}}function Aa(e){let{page:n,itemsPerPage:a,sortBy:t,groupBy:s,search:r}=e;const i=ot("VDataTable"),o=D(()=>({page:n.value,itemsPerPage:a.value,sortBy:t.value,groupBy:s.value,search:r.value}));let c=null;it(o,()=>{ut(c,o.value)||(c&&c.search!==o.value.search&&(n.value=1),i.emit("update:options",o.value),c=o.value)},{deep:!0,immediate:!0})}const Na=H({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),wt=Symbol.for("vuetify:data-table-pagination");function $a(e){const n=se(e,"page",void 0,t=>+(t??1)),a=se(e,"itemsPerPage",void 0,t=>+(t??10));return{page:n,itemsPerPage:a}}function Ra(e){const{page:n,itemsPerPage:a,itemsLength:t}=e,s=D(()=>a.value===-1?0:a.value*(n.value-1)),r=D(()=>a.value===-1?t.value:Math.min(t.value,s.value+a.value)),i=D(()=>a.value===-1||t.value===0?1:Math.ceil(t.value/a.value));dt(()=>{n.value>i.value&&(n.value=i.value)});function o(f){a.value=f,n.value=1}function c(){n.value=Be(n.value+1,1,i.value)}function d(){n.value=Be(n.value-1,1,i.value)}function m(f){n.value=Be(f,1,i.value)}const x={page:n,itemsPerPage:a,startIndex:s,stopIndex:r,pageCount:i,itemsLength:t,nextPage:c,prevPage:d,setPage:m,setItemsPerPage:o};return de(wt,x),x}function La(){const e=ce(wt);if(!e)throw new Error("Missing pagination!");return e}function Oa(e){const n=ot("usePaginatedItems"),{items:a,startIndex:t,stopIndex:s,itemsPerPage:r}=e,i=D(()=>r.value<=0?a.value:a.value.slice(t.value,s.value));return it(i,o=>{n.emit("update:currentItems",o)}),{paginatedItems:i}}const Ea={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:n,value:a}=e;return new Set(a?[(t=n[0])==null?void 0:t.value]:[])},selectAll:e=>{let{selected:n}=e;return n}},St={showSelectAll:!0,allSelected:e=>{let{currentPage:n}=e;return n},select:e=>{let{items:n,value:a,selected:t}=e;for(const s of n)a?t.add(s.value):t.delete(s.value);return t},selectAll:e=>{let{value:n,currentPage:a,selected:t}=e;return St.select({items:a,value:n,selected:t})}},Pt={showSelectAll:!0,allSelected:e=>{let{allItems:n}=e;return n},select:e=>{let{items:n,value:a,selected:t}=e;for(const s of n)a?t.add(s.value):t.delete(s.value);return t},selectAll:e=>{let{value:n,allItems:a,selected:t}=e;return Pt.select({items:a,value:n,selected:t})}},Ha=H({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ut}},"DataTable-select"),_t=Symbol.for("vuetify:data-table-selection");function Ma(e,n){let{allItems:a,currentPage:t}=n;const s=se(e,"modelValue",e.modelValue,k=>new Set(Ae(k).map(v=>{var F;return((F=a.value.find(L=>e.valueComparator(v,L.value)))==null?void 0:F.value)??v})),k=>[...k.values()]),r=D(()=>a.value.filter(k=>k.selectable)),i=D(()=>t.value.filter(k=>k.selectable)),o=D(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Ea;case"all":return Pt;case"page":default:return St}});function c(k){return Ae(k).every(v=>s.value.has(v.value))}function d(k){return Ae(k).some(v=>s.value.has(v.value))}function m(k,v){const F=o.value.select({items:k,value:v,selected:new Set(s.value)});s.value=F}function x(k){m([k],!c([k]))}function f(k){const v=o.value.selectAll({value:k,allItems:r.value,currentPage:i.value,selected:new Set(s.value)});s.value=v}const S=D(()=>s.value.size>0),b=D(()=>{const k=o.value.allSelected({allItems:r.value,currentPage:i.value});return!!k.length&&c(k)}),P=D(()=>o.value.showSelectAll),g={toggleSelect:x,select:m,selectAll:f,isSelected:c,isSomeSelected:d,someSelected:S,allSelected:b,showSelectAll:P};return de(_t,g),g}function we(){const e=ce(_t);if(!e)throw new Error("Missing selection!");return e}const ja=H({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Vt=Symbol.for("vuetify:data-table-sort");function Ga(e){const n=se(e,"sortBy"),a=E(e,"mustSort"),t=E(e,"multiSort");return{sortBy:n,mustSort:a,multiSort:t}}function Ua(e){const{sortBy:n,mustSort:a,multiSort:t,page:s}=e,r=c=>{if(c.key==null)return;let d=n.value.map(x=>({...x}))??[];const m=d.find(x=>x.key===c.key);m?m.order==="desc"?a.value?m.order="asc":d=d.filter(x=>x.key!==c.key):m.order="desc":t.value?d=[...d,{key:c.key,order:"asc"}]:d=[{key:c.key,order:"asc"}],n.value=d,s&&(s.value=1)};function i(c){return!!n.value.find(d=>d.key===c.key)}const o={sortBy:n,toggleSort:r,isSorted:i};return de(Vt,o),o}function It(){const e=ce(Vt);if(!e)throw new Error("Missing sort!");return e}function Wa(e,n,a,t){const s=me();return{sortedItems:D(()=>{var i,o;return a.value.length?za(n.value,a.value,s.current.value,{transform:t==null?void 0:t.transform,sortFunctions:{...e.customKeySort,...(i=t==null?void 0:t.sortFunctions)==null?void 0:i.value},sortRawFunctions:(o=t==null?void 0:t.sortRawFunctions)==null?void 0:o.value}):n.value})}}function za(e,n,a,t){const s=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(i=>[i,t!=null&&t.transform?t.transform(i):i]).sort((i,o)=>{var c,d;for(let m=0;m<n.length;m++){let x=!1;const f=n[m].key,S=n[m].order??"asc";if(S===!1)continue;let b=pe(i[1],f),P=pe(o[1],f),g=i[0].raw,k=o[0].raw;if(S==="desc"&&([b,P]=[P,b],[g,k]=[k,g]),(c=t==null?void 0:t.sortRawFunctions)!=null&&c[f]){const v=t.sortRawFunctions[f](g,k);if(v==null)continue;if(x=!0,v)return v}if((d=t==null?void 0:t.sortFunctions)!=null&&d[f]){const v=t.sortFunctions[f](b,P);if(v==null)continue;if(x=!0,v)return v}if(!x){if(b instanceof Date&&P instanceof Date)return b.getTime()-P.getTime();if([b,P]=[b,P].map(v=>v!=null?v.toString().toLocaleLowerCase():v),b!==P)return ge(b)&&ge(P)?0:ge(b)?-1:ge(P)?1:!isNaN(b)&&!isNaN(P)?Number(b)-Number(P):s.compare(b,P)}}return 0}).map(i=>{let[o]=i;return o})}function qa(){const e=A([]);Lt(()=>e.value=[]);function n(a,t){e.value[t]=a}return{refs:e,updateRef:n}}const Ka=H({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:X,default:"$first"},prevIcon:{type:X,default:"$prev"},nextIcon:{type:X,default:"$next"},lastIcon:{type:X,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ot(),...ct(),...ft(),...Et(),...Ht(),...Mt(),...vt({tag:"nav"}),...mt(),...jt({variant:"text"})},"VPagination"),at=ae()({name:"VPagination",props:Ka(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:a,emit:t}=n;const s=se(e,"modelValue"),{t:r,n:i}=me(),{isRtl:o}=Gt(),{themeClasses:c}=gt(e),{width:d}=ke(),m=Ut(-1);Le(void 0,{scoped:!0});const{resizeRef:x}=Wt(y=>{if(!y.length)return;const{target:u,contentRect:V}=y[0],I=u.querySelector(".v-pagination__list > *");if(!I)return;const C=V.width,$=I.offsetWidth+parseFloat(getComputedStyle(I).marginRight)*2;m.value=P(C,$)}),f=D(()=>parseInt(e.length,10)),S=D(()=>parseInt(e.start,10)),b=D(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):m.value>=0?m.value:P(d.value,58));function P(y,u){const V=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((y-u*V)/u).toFixed(2)))}const g=D(()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(b.value<=0)return[];if(b.value===1)return[s.value];if(f.value<=b.value)return be(f.value,S.value);const y=b.value%2===0,u=y?b.value/2:Math.floor(b.value/2),V=y?u:u+1,I=f.value-u;if(V-s.value>=0)return[...be(Math.max(1,b.value-1),S.value),e.ellipsis,f.value];if(s.value-I>=(y?1:0)){const C=b.value-1,$=f.value-C+S.value;return[S.value,e.ellipsis,...be(C,$)]}else{const C=Math.max(1,b.value-3),$=C===1?s.value:s.value-Math.ceil(C/2)+S.value;return[S.value,e.ellipsis,...be(C,$),e.ellipsis,f.value]}});function k(y,u,V){y.preventDefault(),s.value=u,V&&t(V,u)}const{refs:v,updateRef:F}=qa();Le({VPaginationBtn:{color:E(e,"color"),border:E(e,"border"),density:E(e,"density"),size:E(e,"size"),variant:E(e,"variant"),rounded:E(e,"rounded"),elevation:E(e,"elevation")}});const L=D(()=>g.value.map((y,u)=>{const V=I=>F(I,u);if(typeof y=="string")return{isActive:!1,key:`ellipsis-${u}`,page:y,props:{ref:V,ellipsis:!0,icon:!0,disabled:!0}};{const I=y===s.value;return{isActive:I,key:y,page:i(y),props:{ref:V,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:I?e.activeColor:e.color,"aria-current":I,"aria-label":r(I?e.currentPageAriaLabel:e.pageAriaLabel,y),onClick:C=>k(C,y)}}}})),_=D(()=>{const y=!!e.disabled||s.value<=S.value,u=!!e.disabled||s.value>=S.value+f.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:V=>k(V,S.value,"first"),disabled:y,"aria-label":r(e.firstAriaLabel),"aria-disabled":y}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:V=>k(V,s.value-1,"prev"),disabled:y,"aria-label":r(e.previousAriaLabel),"aria-disabled":y},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:V=>k(V,s.value+1,"next"),disabled:u,"aria-label":r(e.nextAriaLabel),"aria-disabled":u},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:V=>k(V,S.value+f.value-1,"last"),disabled:u,"aria-label":r(e.lastAriaLabel),"aria-disabled":u}:void 0}});function W(){var u;const y=s.value-S.value;(u=v.value[y])==null||u.$el.focus()}function Y(y){y.key===Qe.left&&!e.disabled&&s.value>+e.start?(s.value=s.value-1,Xe(W)):y.key===Qe.right&&!e.disabled&&s.value<S.value+f.value-1&&(s.value=s.value+1,Xe(W))}return oe(()=>l(e.tag,{ref:x,class:["v-pagination",c.value,e.class],style:e.style,role:"navigation","aria-label":r(e.ariaLabel),onKeydown:Y,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(_.value.first):l(N,M({_as:"VPaginationBtn"},_.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(_.value.prev):l(N,M({_as:"VPaginationBtn"},_.value.prev),null)]),L.value.map((y,u)=>l("li",{key:y.key,class:["v-pagination__item",{"v-pagination__item--is-active":y.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(y):l(N,M({_as:"VPaginationBtn"},y.props),{default:()=>[y.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(_.value.next):l(N,M({_as:"VPaginationBtn"},_.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(_.value.last):l(N,M({_as:"VPaginationBtn"},_.value.last),null)])])]})),{}}}),Dt=H({prevIcon:{type:X,default:"$prev"},nextIcon:{type:X,default:"$next"},firstIcon:{type:X,default:"$first"},lastIcon:{type:X,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),lt=ae()({name:"VDataTableFooter",props:Dt(),setup(e,n){let{slots:a}=n;const{t}=me(),{page:s,pageCount:r,startIndex:i,stopIndex:o,itemsLength:c,itemsPerPage:d,setItemsPerPage:m}=La(),x=D(()=>e.itemsPerPageOptions.map(f=>typeof f=="number"?{value:f,title:f===-1?t("$vuetify.dataFooter.itemsPerPageAll"):String(f)}:{...f,title:isNaN(Number(f.title))?t(f.title):f.title}));return oe(()=>{var S;const f=at.filterProps(e);return l("div",{class:"v-data-table-footer"},[(S=a.prepend)==null?void 0:S.call(a),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",null,[t(e.itemsPerPageText)]),l(Q,{items:x.value,modelValue:d.value,"onUpdate:modelValue":b=>m(Number(b)),density:"compact",variant:"outlined","hide-details":!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[t(e.pageText,c.value?i.value+1:0,o.value,c.value)])]),l("div",{class:"v-data-table-footer__pagination"},[l(at,M({modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:r.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},f),null)])])}),{}}}),xe=zt({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,n)=>{let{slots:a}=n;const t=e.tag??"td";return l(t,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:ee(e.height),width:ee(e.width),maxWidth:ee(e.maxWidth),left:ee(e.fixedOffset||null)}},{default:()=>{var s;return[(s=a.default)==null?void 0:s.call(a)]}})}),Qa=H({headers:Array},"DataTable-header"),Tt=Symbol.for("vuetify:data-table-headers"),Ct={title:"",sortable:!1},Xa={...Ct,width:48};function Ya(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,t)=>{let s=!1;for(let r=0;r<n.length;r++)if(n[r].priority>t){n.splice(r,0,{element:a,priority:t}),s=!0;break}s||n.push({element:a,priority:t})},size:()=>n.length,count:()=>{let a=0;if(!n.length)return 0;const t=Math.floor(n[0].priority);for(let s=0;s<n.length;s++)Math.floor(n[s].priority)===t&&(a+=1);return a},dequeue:()=>n.shift()}}function Me(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)n.push(e);else for(const a of e.children)Me(a,n);return n}function Ft(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&n.add(a.key),a.children&&Ft(a.children,n);return n}function Za(e){if(e.key){if(e.key==="data-table-group")return Ct;if(["data-table-expand","data-table-select"].includes(e.key))return Xa}}function Ue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(n,...e.children.map(a=>Ue(a,n+1))):n}function Ja(e){let n=!1;function a(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r)if(i&&(r.fixed=!0),r.fixed)if(r.children)for(let o=r.children.length-1;o>=0;o--)a(r.children[o],!0);else n?isNaN(+r.width)&&Kt(`Multiple fixed columns should have a static width (key: ${r.key})`):r.lastFixed=!0,n=!0;else if(r.children)for(let o=r.children.length-1;o>=0;o--)a(r.children[o]);else n=!1}for(let r=e.length-1;r>=0;r--)a(e[r]);function t(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return i;if(r.children){r.fixedOffset=i;for(const o of r.children)i=t(o,i)}else r.fixed&&(r.fixedOffset=i,i+=parseFloat(r.width||"0")||0);return i}let s=0;for(const r of e)s=t(r,s)}function el(e,n){const a=[];let t=0;const s=Ya(e);for(;s.size()>0;){let i=s.count();const o=[];let c=1;for(;i>0;){const{element:d,priority:m}=s.dequeue(),x=n-t-Ue(d);if(o.push({...d,rowspan:x??1,colspan:d.children?Me(d).length:1}),d.children)for(const f of d.children){const S=m%1+c/Math.pow(10,t+2);s.enqueue(f,t+x+S)}c+=1,i-=1}t+=1,a.push(o)}return{columns:e.map(i=>Me(i)).flat(),headers:a}}function Bt(e){const n=[];for(const a of e){const t={...Za(a),...a},s=t.key??(typeof t.value=="string"?t.value:null),r=t.value??s??null,i={...t,key:s,value:r,sortable:t.sortable??(t.key!=null||!!t.sort),children:t.children?Bt(t.children):void 0};n.push(i)}return n}function tl(e,n){const a=A([]),t=A([]),s=A({}),r=A({}),i=A({});dt(()=>{var P,g,k;const d=(e.headers||Object.keys(e.items[0]??{}).map(v=>({key:v,title:qt(v)}))).slice(),m=Ft(d);(P=n==null?void 0:n.groupBy)!=null&&P.value.length&&!m.has("data-table-group")&&d.unshift({key:"data-table-group",title:"Group"}),(g=n==null?void 0:n.showSelect)!=null&&g.value&&!m.has("data-table-select")&&d.unshift({key:"data-table-select"}),(k=n==null?void 0:n.showExpand)!=null&&k.value&&!m.has("data-table-expand")&&d.push({key:"data-table-expand"});const x=Bt(d);Ja(x);const f=Math.max(...x.map(v=>Ue(v)))+1,S=el(x,f);a.value=S.headers,t.value=S.columns;const b=S.headers.flat(1);for(const v of b)v.key&&(v.sortable&&(v.sort&&(s.value[v.key]=v.sort),v.sortRaw&&(r.value[v.key]=v.sortRaw)),v.filter&&(i.value[v.key]=v.filter))});const o={headers:a,columns:t,sortFunctions:s,sortRawFunctions:r,filterFunctions:i};return de(Tt,o),o}function Se(){const e=ce(Tt);if(!e)throw new Error("Missing headers!");return e}const At=H({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:X,default:"$sortAsc"},sortDescIcon:{type:X,default:"$sortDesc"},headerProps:{type:Object},...je(),...Qt()},"VDataTableHeaders"),nt=ae()({name:"VDataTableHeaders",props:At(),setup(e,n){let{slots:a}=n;const{t}=me(),{toggleSort:s,sortBy:r,isSorted:i}=It(),{someSelected:o,allSelected:c,selectAll:d,showSelectAll:m}=we(),{columns:x,headers:f}=Se(),{loaderClasses:S}=Xt(e);function b(y,u){if(!(!e.sticky&&!y.fixed))return{position:"sticky",left:y.fixed?ee(y.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${u})`:void 0}}function P(y){const u=r.value.find(V=>V.key===y.key);return u?u.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:g,backgroundColorStyles:k}=Yt(e,"color"),{displayClasses:v,mobile:F}=ke(e),L=D(()=>({headers:f.value,columns:x.value,toggleSort:s,isSorted:i,sortBy:r.value,someSelected:o.value,allSelected:c.value,selectAll:d,getSortIcon:P})),_=D(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},v.value,S.value]),W=y=>{let{column:u,x:V,y:I}=y;const C=u.key==="data-table-select"||u.key==="data-table-expand",$=M(e.headerProps??{},u.headerProps??{});return l(xe,M({tag:"th",align:u.align,class:[{"v-data-table__th--sortable":u.sortable&&!e.disableSort,"v-data-table__th--sorted":i(u),"v-data-table__th--fixed":u.fixed},..._.value],style:{width:ee(u.width),minWidth:ee(u.minWidth),maxWidth:ee(u.maxWidth),...b(u,I)},colspan:u.colspan,rowspan:u.rowspan,onClick:u.sortable?()=>s(u):void 0,fixed:u.fixed,nowrap:u.nowrap,lastFixed:u.lastFixed,noPadding:C},$),{default:()=>{var Z;const z=`header.${u.key}`,le={column:u,selectAll:d,isSorted:i,toggleSort:s,sortBy:r.value,someSelected:o.value,allSelected:c.value,getSortIcon:P};return a[z]?a[z](le):u.key==="data-table-select"?((Z=a["header.data-table-select"])==null?void 0:Z.call(a,le))??(m.value&&l(Ge,{modelValue:c.value,indeterminate:o.value&&!c.value,"onUpdate:modelValue":d},null)):l("div",{class:"v-data-table-header__content"},[l("span",null,[u.title]),u.sortable&&!e.disableSort&&l(Oe,{key:"icon",class:"v-data-table-header__sort-icon",icon:P(u)},null),e.multiSort&&i(u)&&l("div",{key:"badge",class:["v-data-table-header__sort-badge",...g.value],style:k.value},[r.value.findIndex(q=>q.key===u.key)+1])])}})},Y=()=>{const y=M(e.headerProps??{}??{}),u=D(()=>x.value.filter(I=>(I==null?void 0:I.sortable)&&!e.disableSort)),V=D(()=>{if(x.value.find(C=>C.key==="data-table-select")!=null)return c.value?"$checkboxOn":o.value?"$checkboxIndeterminate":"$checkboxOff"});return l(xe,M({tag:"th",class:[..._.value],colspan:f.value.length+1},y),{default:()=>[l("div",{class:"v-data-table-header__content"},[l(Q,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:u.value,label:t("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:V.value,"onClick:append":()=>d(!c.value)},{...a,chip:I=>{var C;return l(Pa,{onClick:(C=I.item.raw)!=null&&C.sortable?()=>s(I.item.raw):void 0,onMousedown:$=>{$.preventDefault(),$.stopPropagation()}},{default:()=>[I.item.title,l(Oe,{class:["v-data-table__td-sort-icon",i(I.item.raw)&&"v-data-table__td-sort-icon-active"],icon:P(I.item.raw),size:"small"},null)]})}})])]})};oe(()=>F.value?l("tr",null,[l(Y,null,null)]):l(re,null,[a.headers?a.headers(L.value):f.value.map((y,u)=>l("tr",null,[y.map((V,I)=>l(W,{column:V,x:I,y:u},null))])),e.loading&&l("tr",{class:"v-data-table-progress"},[l("th",{colspan:x.value.length},[l(Zt,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),al=H({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),ll=ae()({name:"VDataTableGroupHeaderRow",props:al(),setup(e,n){let{slots:a}=n;const{isGroupOpen:t,toggleGroup:s,extractRows:r}=pt(),{isSelected:i,isSomeSelected:o,select:c}=we(),{columns:d}=Se(),m=D(()=>r([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[d.value.map(x=>{var f,S;if(x.key==="data-table-group"){const b=t(e.item)?"$expand":"$next",P=()=>s(e.item);return((f=a["data-table-group"])==null?void 0:f.call(a,{item:e.item,count:m.value.length,props:{icon:b,onClick:P}}))??l(xe,{class:"v-data-table-group-header-row__column"},{default:()=>[l(N,{size:"small",variant:"text",icon:b,onClick:P},null),l("span",null,[e.item.value]),l("span",null,[R("("),m.value.length,R(")")])]})}if(x.key==="data-table-select"){const b=i(m.value),P=o(m.value)&&!b,g=k=>c(m.value,k);return((S=a["data-table-select"])==null?void 0:S.call(a,{props:{modelValue:b,indeterminate:P,"onUpdate:modelValue":g}}))??l("td",null,[l(Ge,{modelValue:b,indeterminate:P,"onUpdate:modelValue":g},null)])}return l("td",null,null)})])}}),nl=H({index:Number,item:Object,cellProps:[Object,Function],onClick:Ne(),onContextmenu:Ne(),onDblclick:Ne(),...je()},"VDataTableRow"),sl=ae()({name:"VDataTableRow",props:nl(),setup(e,n){let{slots:a}=n;const{displayClasses:t,mobile:s}=ke(e,"v-data-table__tr"),{isSelected:r,toggleSelect:i,someSelected:o,allSelected:c,selectAll:d}=we(),{isExpanded:m,toggleExpand:x}=yt(),{toggleSort:f,sortBy:S,isSorted:b}=It(),{columns:P}=Se();oe(()=>l("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},t.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&P.value.map((g,k)=>{const v=e.item,F=`item.${g.key}`,L=`header.${g.key}`,_={index:e.index,item:v.raw,internalItem:v,value:pe(v.columns,g.key),column:g,isSelected:r,toggleSelect:i,isExpanded:m,toggleExpand:x},W={column:g,selectAll:d,isSorted:b,toggleSort:f,sortBy:S.value,someSelected:o.value,allSelected:c.value,getSortIcon:()=>""},Y=typeof e.cellProps=="function"?e.cellProps({index:_.index,item:_.item,internalItem:_.internalItem,value:_.value,column:g}):e.cellProps,y=typeof g.cellProps=="function"?g.cellProps({index:_.index,item:_.item,internalItem:_.internalItem,value:_.value}):g.cellProps;return l(xe,M({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,lastFixed:g.lastFixed,maxWidth:s.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:s.value?void 0:g.width},Y,y),{default:()=>{var V,I,C,$,z;if(a[F]&&!s.value)return(V=a[F])==null?void 0:V.call(a,_);if(g.key==="data-table-select")return((I=a["item.data-table-select"])==null?void 0:I.call(a,_))??l(Ge,{disabled:!v.selectable,modelValue:r([v]),onClick:Ee(()=>i(v),["stop"])},null);if(g.key==="data-table-expand")return((C=a["item.data-table-expand"])==null?void 0:C.call(a,_))??l(N,{icon:m(v)?"$collapse":"$expand",size:"small",variant:"text",onClick:Ee(()=>x(v),["stop"])},null);const u=He(_.value);return s.value?l(re,null,[l("div",{class:"v-data-table__td-title"},[(($=a[L])==null?void 0:$.call(a,W))??g.title]),l("div",{class:"v-data-table__td-value"},[((z=a[F])==null?void 0:z.call(a,_))??u])]):u}})})]))}}),Nt=H({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...je()},"VDataTableRows"),st=ae()({name:"VDataTableRows",inheritAttrs:!1,props:Nt(),setup(e,n){let{attrs:a,slots:t}=n;const{columns:s}=Se(),{expandOnClick:r,toggleExpand:i,isExpanded:o}=yt(),{isSelected:c,toggleSelect:d}=we(),{toggleGroup:m,isGroupOpen:x}=pt(),{t:f}=me(),{mobile:S}=ke(e);return oe(()=>{var b,P;return e.loading&&(!e.items.length||t.loading)?l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:s.value.length},[((b=t.loading)==null?void 0:b.call(t))??f(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:s.value.length},[((P=t["no-data"])==null?void 0:P.call(t))??f(e.noDataText)])]):l(re,null,[e.items.map((g,k)=>{var L;if(g.type==="group"){const _={index:k,item:g,columns:s.value,isExpanded:o,toggleExpand:i,isSelected:c,toggleSelect:d,toggleGroup:m,isGroupOpen:x};return t["group-header"]?t["group-header"](_):l(ll,M({key:`group-header_${g.id}`,item:g},tt(a,":group-header",()=>_)),t)}const v={index:k,item:g.raw,internalItem:g,columns:s.value,isExpanded:o,toggleExpand:i,isSelected:c,toggleSelect:d},F={...v,props:M({key:`item_${g.key??g.index}`,onClick:r.value?()=>{i(g)}:void 0,index:k,item:g,cellProps:e.cellProps,mobile:S.value},tt(a,":row",()=>v),typeof e.rowProps=="function"?e.rowProps({item:v.item,index:v.index,internalItem:v.internalItem}):e.rowProps)};return l(re,{key:F.props.key},[t.item?t.item(F):l(sl,F.props,t),o(g)&&((L=t["expanded-row"])==null?void 0:L.call(t,v))])})])}),{}}}),$t=H({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ct(),...ft(),...vt(),...mt()},"VTable"),rt=ae()({name:"VTable",props:$t(),setup(e,n){let{slots:a,emit:t}=n;const{themeClasses:s}=gt(e),{densityClasses:r}=Jt(e);return oe(()=>l(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},s.value,r.value,e.class],style:e.style},{default:()=>{var i,o,c;return[(i=a.top)==null?void 0:i.call(a),a.default?l("div",{class:"v-table__wrapper",style:{height:ee(e.height)}},[l("table",null,[a.default()])]):(o=a.wrapper)==null?void 0:o.call(a),(c=a.bottom)==null?void 0:c.call(a)]}})),{}}}),rl=H({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ol(e,n,a,t){const s=e.returnObject?n:ye(n,e.itemValue),r=ye(n,e.itemSelectable,!0),i=t.reduce((o,c)=>(c.key!=null&&(o[c.key]=ye(n,c.value)),o),{});return{type:"item",key:e.returnObject?ye(n,e.itemValue):s,index:a,value:s,selectable:r,columns:i,raw:n}}function il(e,n,a){return n.map((t,s)=>ol(e,t,s,a))}function ul(e,n){return{items:D(()=>il(e,e.items,n.value))}}const dl=H({...Nt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Va(),...Da(),...Qa(),...rl(),...Ha(),...ja(),...At(),...$t()},"DataTable"),cl=H({...Na(),...dl(),...wa(),...Dt()},"VDataTable"),ne=ae()({name:"VDataTable",props:cl(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{attrs:a,slots:t}=n;const{groupBy:s}=Ta(e),{sortBy:r,multiSort:i,mustSort:o}=Ga(e),{page:c,itemsPerPage:d}=$a(e),{disableSort:m}=ea(e),{columns:x,headers:f,sortFunctions:S,sortRawFunctions:b,filterFunctions:P}=tl(e,{groupBy:s,showSelect:E(e,"showSelect"),showExpand:E(e,"showExpand")}),{items:g}=ul(e,x),k=E(e,"search"),{filteredItems:v}=Sa(e,g,k,{transform:K=>K.columns,customKeyFilter:P}),{toggleSort:F}=Ua({sortBy:r,multiSort:i,mustSort:o,page:c}),{sortByWithGroups:L,opened:_,extractRows:W,isGroupOpen:Y,toggleGroup:y}=Ca({groupBy:s,sortBy:r,disableSort:m}),{sortedItems:u}=Wa(e,v,L,{transform:K=>({...K.raw,...K.columns}),sortFunctions:S,sortRawFunctions:b}),{flatItems:V}=Ba(u,s,_),I=D(()=>V.value.length),{startIndex:C,stopIndex:$,pageCount:z,setItemsPerPage:le}=Ra({page:c,itemsPerPage:d,itemsLength:I}),{paginatedItems:Z}=Oa({items:V,startIndex:C,stopIndex:$,itemsPerPage:d}),q=D(()=>W(Z.value)),{isSelected:Pe,select:_e,selectAll:Ve,toggleSelect:Ie,someSelected:De,allSelected:Te}=Ma(e,{allItems:g,currentPage:q}),{isExpanded:Ce,toggleExpand:Fe}=Ia(e);Aa({page:c,itemsPerPage:d,sortBy:r,groupBy:s,search:k}),Le({VDataTableRows:{hideNoData:E(e,"hideNoData"),noDataText:E(e,"noDataText"),loading:E(e,"loading"),loadingText:E(e,"loadingText")}});const U=D(()=>({page:c.value,itemsPerPage:d.value,sortBy:r.value,pageCount:z.value,toggleSort:F,setItemsPerPage:le,someSelected:De.value,allSelected:Te.value,isSelected:Pe,select:_e,selectAll:Ve,toggleSelect:Ie,isExpanded:Ce,toggleExpand:Fe,isGroupOpen:Y,toggleGroup:y,items:q.value.map(K=>K.raw),internalItems:q.value,groupedItems:Z.value,columns:x.value,headers:f.value}));return oe(()=>{const K=lt.filterProps(e),O=nt.filterProps(e),w=st.filterProps(e),j=rt.filterProps(e);return l(rt,M({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},j),{top:()=>{var h;return(h=t.top)==null?void 0:h.call(t,U.value)},default:()=>{var h,B,We,ze,qe,Ke;return t.default?t.default(U.value):l(re,null,[(h=t.colgroup)==null?void 0:h.call(t,U.value),!e.hideDefaultHeader&&l("thead",{key:"thead"},[l(nt,O,t)]),(B=t.thead)==null?void 0:B.call(t,U.value),!e.hideDefaultBody&&l("tbody",null,[(We=t["body.prepend"])==null?void 0:We.call(t,U.value),t.body?t.body(U.value):l(st,M(a,w,{items:Z.value}),t),(ze=t["body.append"])==null?void 0:ze.call(t,U.value)]),(qe=t.tbody)==null?void 0:qe.call(t,U.value),(Ke=t.tfoot)==null?void 0:Ke.call(t,U.value)])},bottom:()=>t.bottom?t.bottom(U.value):!e.hideDefaultFooter&&l(re,null,[l(J,null,null),l(lt,K,{prepend:t["footer.prepend"]})])})}),{}}}),te=e=>(da("data-v-7e00de3a"),e=e(),ca(),e),fl={class:"d-flex"},vl={class:"sidebar",style:{"margin-right":"12px","background-color":"white"}},ml=te(()=>T("h3",{class:"mb-1"},"故事管理",-1)),gl=te(()=>T("h3",{class:"mb-1"},"角色管理",-1)),bl={class:"content",style:{"background-color":"white"}},yl={class:"d-flex align-center justify-space-between mb-4"},hl=te(()=>T("h3",null,"我的故事",-1)),pl=te(()=>T("div",{class:"d-flex align-center justify-space-between mt-4 mb-4"},[T("h3",null,"我的延續")],-1)),xl=te(()=>T("div",{class:"d-flex align-center justify-space-between mb-4"},[T("h3",null,"收藏的故事")],-1)),kl={class:"d-flex align-center justify-space-between py-2"},wl=te(()=>T("div",{class:"d-flex align-center justify-space-between mb-4"},[T("h3",null,"追蹤的故事")],-1)),Sl={class:"d-flex align-center justify-space-between py-2"},Pl=te(()=>T("div",{class:"d-flex align-center justify-space-between mb-4"},[T("h3",null,"已投票的故事")],-1)),_l={class:"d-flex align-center justify-space-between mb-4"},Vl=te(()=>T("h3",null,"建立的角色",-1)),Il={class:"d-flex align-center justify-space-between py-2"},Dl=te(()=>T("div",{class:"d-flex align-center justify-space-between mb-4"},[T("h3",null,"收藏的角色")],-1)),Tl={class:"d-flex align-center justify-space-between py-2"},Cl={class:"d-flex align-center justify-space-between",style:{padding:"24px 24px 0px 24px"}},Fl={class:"d-flex align-center"},Bl={class:"d-flex align-center"},Al={__name:"management",setup(e){const n=A([{title:"首頁",disabled:!1,href:"/"},{title:"故事/角色管理",disabled:!0,href:"/management"}]),{apiAuth:a}=sa(),t=ta(),s=A("option-1"),r=A(10),i=A([{key:"createdAt",order:"desc"}]),o=A(1),c=A(0),d=A([]),m=A([]),x=A(null),f=A({open:!1,id:""}),S=O=>{f.value.id=O._id,F.value.value=O.title,L.value.value=O.state,_.value.value=O.show,f.value.open=!0},b=()=>{f.value.open=!1,v()},P=fa({title:va().required("故事名稱必填"),state:Je(),show:Je()}),{handleSubmit:g,isSubmitting:k,resetForm:v}=ma({validationSchema:P,initialValues:{title:"",state:!0,show:!0}}),F=Re("title"),L=Re("state"),_=Re("show"),W=g(async O=>{var w,j,h;if(!((w=d.value[0])!=null&&w.error)&&!(f.value.id.length===0&&d.value.length<1))try{const B=new FormData;B.append("title",O.title),B.append("state",O.state),B.append("show",O.show),d.value.length>0&&B.append("image",d.value[0].file),await a.patch("/story/"+f.value.id,B),t({text:"新增成功",snackbarProps:{color:"green"}}),b(),u(!0)}catch(B){console.log(B),t({text:((h=(j=B==null?void 0:B.response)==null?void 0:j.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),Y=[{title:"書封",align:"center",width:"160px",sortable:!1,key:"image"},{title:"書名",align:"start",width:"130px",key:"title"},{title:"狀態",align:"center",key:"state"},{title:"顯示",align:"center",key:"show",sortable:!1},{title:"收藏數",align:"center",key:"collectionNum"},{title:"追蹤數",align:"center",key:"followNum"},{title:"總票數",align:"center",key:"totalVotes"},{title:"編輯",align:"center",key:"actions",sortable:!1}],y=A([]),u=async()=>{var O,w,j,h;try{const{data:B}=await a.get("/story/all",{params:{page:o.value,itemsPerPage:r.value,sortBy:((O=i.value[0])==null?void 0:O.key)||"createdAt",sortOrder:((w=i.value[0])==null?void 0:w.order)||"desc"}});console.log(B),y.value.splice(0,y.value.length,...B.result.data),console.log(y.value),c.value=B.result.total}catch(B){console.log(B),t({text:((h=(j=B==null?void 0:B.response)==null?void 0:j.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}};u();const V=async()=>{var O,w;try{await a.delete("/story/"+f.value.id),t({text:"刪除成功",snackbarProps:{color:"green"}}),b(),u(!0)}catch(j){console.log(j),t({text:((w=(O=j==null?void 0:j.response)==null?void 0:O.data)==null?void 0:w.message)||"發生錯誤",snackbarProps:{color:"red"}})}},I=[{title:"書名",align:"start",width:"130px",key:"title"},{title:"狀態",align:"center",key:"state"},{title:"我的延續內容",align:"center",key:"content"},{title:"總票數",align:"center",key:"totalVotes"},{title:"編輯",align:"center",key:"actions",sortable:!1}],C=[{img:"link_to_image",title:"想要讓人因此試著鍛煉成一個跟學生成員長很像的女生，結果我卻變成了她的僕人",state:"連載中(100%)",show:"公開",content:"鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生鍛煉成一個跟學生",collectionNum:1e3,followNum:1e3,totalVotes:23000203}],$=["文學小說","奇幻"],z=["人族","魔族"],le=["男","女"],Z=["學員"],q=A([]),Pe=[{title:"類別",align:"start",sortable:!1,key:"category"},{title:"書名",key:"title",align:"start",sortable:!1},{title:"最新章節",key:"chapterName",align:"center",sortable:!1},{title:"最初作者",key:"author",align:"center",sortable:!1},{title:"總字數",key:"totalVotes",align:"center"},{title:"收藏數",key:"collectionNum",align:"center"}],_e=A([{category:"文學小說",title:"想要讓人因此試著鍛煉成一個跟學生成員長很像的女生，結果我卻變成了她的僕人",chapterName:"後記——善良不需要很聰明",author:"新北工程師",totalWordCount:4,collectionNum:"1%"},{category:"奇幻",title:237,chapterName:9,author:37,totalWordCount:4333,collectionNum:"1%"}]),Ve=[{title:"類別",align:"start",sortable:!1,key:"category"},{title:"書名",key:"title",align:"start",sortable:!1},{title:"狀態",key:"state",align:"center",sortable:!1},{title:"最新章節",key:"chapterName",align:"center",sortable:!1},{title:"最初作者",key:"author",align:"center",sortable:!1},{title:"追蹤數",key:"followNum",align:"center"}],Ie=[{category:"奇幻",title:"想要讓人因此試著鍛煉成一個跟學生",state:"連載中(100%)",chapterName:"後記——善良不需要很聰明",author:"新北工程師",followNum:1e3}],De=[{title:"書名",key:"title",align:"start",sortable:!1},{title:"投票記錄內容",key:"content",align:"center",sortable:!1},{title:"延續者",key:"supportAuthor",align:"center",sortable:!1},{title:"總票數",key:"totalVotes",align:"center"},{title:"編輯",align:"center",key:"actions",sortable:!1}],Te=[{title:"想要讓人因此試著鍛煉成一個跟學生",content:"想要讓人因此試著鍛煉成一個跟學生想要讓人因此試著鍛煉成一個跟學生",supportAuthor:"阿北工程師",totalVotes:20,followNum:1e3}],Ce=[{title:"角色",key:"name",align:"start",sortable:!1},{title:"種族",key:"race",align:"center",sortable:!1},{title:"性別",key:"gender",align:"center",sortable:!1},{title:"角色描述",key:"roleDescription",align:"center"},{title:"出現故事",key:"emergeStory",align:"center",sortable:!1},{title:"收藏數",key:"collectionNum",align:"center"},{title:"編輯",key:"actions",align:"center",sortable:!1}],Fe=[{name:"煉學生",race:"人族",gender:"男",roleDescription:"想要讓人因此試著鍛煉成一個跟學生想要讓人因此試著鍛煉成一個跟學生",emergeStory:"學員學員",collectionNum:43}],U=[{title:"角色",key:"name",align:"start",sortable:!1},{title:"種族",key:"race",align:"center",sortable:!1},{title:"性別",key:"gender",align:"center",sortable:!1},{title:"角色描述",key:"roleDescription",align:"center"},{title:"出現故事",key:"emergeStory",align:"center",sortable:!1},{title:"收藏數",key:"collectionNum",align:"center"},{title:"編輯",key:"actions",align:"center",sortable:!1}],K=[{name:"煉學生",race:"人族",gender:"男",roleDescription:"想要讓人因此試著鍛煉成一個跟學生想要讓人因此試著鍛煉成一個跟學生",emergeStory:"學員學員",collectionNum:43}];return(O,w)=>{const j=aa("vue-file-agent");return ra(),la(re,null,[l(ba,{style:{padding:"32px"}},{default:p(()=>[l(ya,{items:n.value,style:{padding:"0px 12px 16px 12px"}},{divider:p(()=>[l(Oe,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),T("div",fl,[T("div",vl,[l(xa,{class:"py-0",dense:""},{default:p(()=>[ml,l(ka,{class:"d-flex"},{default:p(()=>[l(ha,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=h=>s.value=h),color:"primary",direction:"vertical"},{default:p(()=>[l(ie,{class:"my-1","prepend-icon":"mdi-book",text:"我的故事/延續",value:"option-1"}),l(ie,{class:"my-1","prepend-icon":"mdi-bookmark",text:"收藏的故事",value:"option-2"}),l(ie,{class:"my-1","prepend-icon":"mdi-heart",text:"追蹤的故事",value:"option-3"}),l(ie,{class:"my-1","prepend-icon":"mdi-vote",text:"已投票的故事",value:"option-4"}),l(J,{class:"my-6"}),gl,l(ie,{class:"my-1","prepend-icon":"mdi-account-plus",text:"建立的角色",value:"option-5"}),l(ie,{class:"my-1","prepend-icon":"mdi-account-multiple",text:"收藏的角色",value:"option-6"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),T("div",bl,[l(pa,{modelValue:s.value,"onUpdate:modelValue":w[9]||(w[9]=h=>s.value=h)},{default:p(()=>[l(ue,{value:"option-1"},{default:p(()=>[T("div",yl,[hl,l(N,{"prepend-icon":"mdi-plus",size:"small",to:"/createStory"},{default:p(()=>[R("新增故事")]),_:1})]),l(J),l(fe,{flat:""},{default:p(()=>[l(ve,null,{default:p(()=>[l(ne,{"items-per-page":r.value,"onUpdate:itemsPerPage":[w[1]||(w[1]=h=>r.value=h),w[4]||(w[4]=h=>u(!1))],"sort-by":i.value,"onUpdate:sortBy":[w[2]||(w[2]=h=>i.value=h),w[5]||(w[5]=h=>u(!1))],page:o.value,"onUpdate:page":[w[3]||(w[3]=h=>o.value=h),w[6]||(w[6]=h=>u(!1))],headers:Y,items:y.value,"items-length":c.value,density:"comfortable","item-key":"name"},{"item.image":p(({value:h})=>[l(oa,{src:h,"max-height":"100px",class:"py-1"},null,8,["src"])]),"item.state":p(({item:h})=>[T("span",null,He(h.state?"完結":"連載"),1)]),"item.show":p(({item:h})=>[T("span",null,He(h.show?"公開":"隱藏"),1)]),"item.actions":p(({item:h})=>[l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal",onClick:B=>S(h)},{default:p(()=>[R(" 編輯 ")]),_:2},1032,["onClick"])]),_:2},1032,["items-per-page","sort-by","page","items","items-length"])]),_:1})]),_:1}),pl,l(J),l(fe,{flat:""},{default:p(()=>[l(ve,null,{default:p(()=>[l(ne,{headers:I,items:C,density:"comfortable","item-key":"name"},{"item.actions":p(({item:h})=>[l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:p(()=>[R(" 刪除紀錄 ")]),_:1})]),_:2},1024)]),_:1})]),_:1})]),_:1}),l(ue,{value:"option-2"},{default:p(()=>[xl,l(J),T("div",kl,[l(N,{size:"small"},{default:p(()=>[R("移除")]),_:1}),l(Q,{dense:"",density:"comfortable",label:"故事分類","hide-details":"","max-width":"150px",items:$})]),l(ne,{modelValue:q.value,"onUpdate:modelValue":w[7]||(w[7]=h=>q.value=h),headers:Pe,items:_e.value,"show-select":"","item-value":"title"},null,8,["modelValue","items"])]),_:1}),l(ue,{value:"option-3"},{default:p(()=>[wl,l(J),T("div",Sl,[l(N,{size:"small"},{default:p(()=>[R("移除")]),_:1}),l(Q,{dense:"",density:"comfortable",label:"故事分類","hide-details":"","max-width":"150px",items:$})]),l(ne,{modelValue:q.value,"onUpdate:modelValue":w[8]||(w[8]=h=>q.value=h),headers:Ve,items:Ie,"show-select":"","item-value":"title"},null,8,["modelValue"])]),_:1}),l(ue,{value:"option-4"},{default:p(()=>[Pl,l(J),l(ne,{density:"comfortable","item-key":"name",headers:De,items:Te},{"item.actions":p(({item:h})=>[l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:p(()=>[R(" 刪除紀錄 ")]),_:1})]),_:2},1024)]),_:1}),l(ue,{value:"option-5"},{default:p(()=>[T("div",_l,[Vl,l(N,{"prepend-icon":"mdi-plus",size:"small"},{default:p(()=>[R("新增角色")]),_:1})]),l(J),T("div",Il,[l(Ye,{"max-width":"300"},{default:p(()=>[l($e,{label:"角色搜尋",density:"compact","hide-details":"","single-line":"",variant:"outlined",color:"black"})]),_:1}),l(Q,{dense:"",density:"comfortable",label:"種族","hide-details":"","max-width":"150px",items:z}),l(Q,{dense:"",density:"comfortable",label:"性別","hide-details":"","max-width":"150px",items:le}),l(Q,{dense:"",density:"comfortable",label:"出現故事","hide-details":"","max-width":"150px",items:Z})]),l(fe,{flat:""},{default:p(()=>[l(ve,null,{default:p(()=>[l(ne,{headers:Ce,items:Fe,density:"comfortable","item-key":"name"},{"item.actions":p(({item:h})=>[l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:p(()=>[R(" 刪除 ")]),_:1}),l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:p(()=>[R(" 編輯 ")]),_:1})]),_:2},1024)]),_:1})]),_:1})]),_:1}),l(ue,{value:"option-6"},{default:p(()=>[Dl,l(J),T("div",Tl,[l(Ye,{"max-width":"300"},{default:p(()=>[l($e,{label:"角色搜尋",density:"compact","hide-details":"","single-line":"",variant:"outlined",color:"black"})]),_:1}),l(Q,{dense:"",density:"comfortable",label:"種族","hide-details":"","max-width":"150px",items:z}),l(Q,{dense:"",density:"comfortable",label:"性別","hide-details":"","max-width":"150px",items:le}),l(Q,{dense:"",density:"comfortable",label:"出現故事","hide-details":"","max-width":"150px",items:Z})]),l(fe,{flat:""},{default:p(()=>[l(ve,null,{default:p(()=>[l(ne,{headers:U,items:K,density:"comfortable","item-key":"name"},{"item.actions":p(({item:h})=>[l(N,{text:"",to:"",active:!1,ripple:!1,variant:"tonal"},{default:p(()=>[R(" 移除 ")]),_:1})]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),l(na,{modelValue:f.value.open,"onUpdate:modelValue":w[16]||(w[16]=h=>f.value.open=h),persistent:"",width:"500"},{default:p(()=>[l(_a,{onSubmit:Ee(G(W),["prevent"]),disabled:G(k)},{default:p(()=>[l(fe,null,{default:p(()=>[T("div",Cl,[l(ia,{class:"px-0"},{default:p(()=>[R("編輯")]),_:1}),l(N,{style:{"background-color":"#f24e1e",color:"white"},onClick:w[10]||(w[10]=h=>V())},{default:p(()=>[R("刪除故事")]),_:1})]),l(ve,null,{default:p(()=>[l($e,{label:"書名",modelValue:G(F).value.value,"onUpdate:modelValue":w[11]||(w[11]=h=>G(F).value.value=h),"error-messages":G(F).errorMessage.value},null,8,["modelValue","error-messages"]),l(Ze,{class:"me-4 mb-0"},{default:p(()=>[R("故事狀態")]),_:1}),l(et,{class:"d-flex align-center",row:"","hide-details":"",modelValue:G(L).value.value,"onUpdate:modelValue":w[12]||(w[12]=h=>G(L).value.value=h),"error-messages":G(L).errorMessage.value},{default:p(()=>[T("div",Fl,[l(he,{label:"完結",value:!0,class:"me-4"}),l(he,{label:"連載中",value:!1,style:{flex:"none"}})])]),_:1},8,["modelValue","error-messages"]),l(Ze,{class:"me-4 mb-0"},{default:p(()=>[R("顯示方式")]),_:1}),l(et,{class:"d-flex align-center",row:"","hide-details":"",modelValue:G(_).value.value,"onUpdate:modelValue":w[13]||(w[13]=h=>G(_).value.value=h),"error-messages":G(_).errorMessage.value},{default:p(()=>[T("div",Bl,[l(he,{label:"公開",value:!0,class:"me-4"}),l(he,{label:"隱藏",value:!1})])]),_:1},8,["modelValue","error-messages"]),l(j,{modelValue:d.value,"onUpdate:modelValue":w[14]||(w[14]=h=>d.value=h),"raw-model-value":m.value,"onUpdate:rawModelValue":w[15]||(w[15]=h=>m.value=h),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:x},null,8,["modelValue","raw-model-value"])]),_:1}),l(ua,null,{default:p(()=>[l(N,{color:"red",loading:G(k),onClick:b},{default:p(()=>[R("取消")]),_:1},8,["loading"]),l(N,{color:"green",type:"submit",loading:G(k)},{default:p(()=>[R("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])],64)}}},ql=ga(Al,[["__scopeId","data-v-7e00de3a"]]);export{ql as default};
