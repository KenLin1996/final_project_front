import{x as g,o as a,Q as $,R as b,S as n,a2 as r,Z as h,c as u,U as i,T as p,ad as N,O as V,ag as k}from"./index-mn7cIsBz.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as S}from"./VContainer-otX76Oty.js";const R={class:"my-4 white-space-pre-line word-wrap-break-word"},j={class:"text-center"},T={__name:"[articleId]",setup(A){const{api:f}=N(),v=V(),x=k(),s=g({content:[]}),c=a(()=>v.params.id),_=a(()=>v.params.articleId),l=a(()=>s.value.content.find(e=>e._id===_.value)),y=a(()=>{var e;return((e=l.value)==null?void 0:e.content.join(""))||""}),d=a(()=>s.value.content.findIndex(e=>e._id===_.value)),C=a(()=>d.value>0),I=a(()=>d.value<s.value.content.length-1),m=e=>{const t=d.value+e;if(t>=0&&t<s.value.content.length){const o=s.value.content[t]._id;x.push(`/stories/${c.value}/articles/${o}`)}};return(async()=>{var e;try{const{data:t}=await f.get(`/story/${c.value}`);s.value=t.result,document.title=`界筆 | ${((e=l.value)==null?void 0:e.chapterName)||"錯誤章節"}`}catch(t){console.error("加載故事失敗:",t)}})(),(e,t)=>($(),b(S,{class:"d-flex flex-column justify-space-between pa-8",style:{"min-height":"480px"}},{default:n(()=>{var o;return[r("div",null,[r("h2",null,h((o=l.value)==null?void 0:o.chapterName),1),r("p",R,h(y.value),1)]),r("div",j,[u(p,{class:"mx-2",onClick:t[0]||(t[0]=w=>m(-1)),disabled:!C.value},{default:n(()=>[i("上一章")]),_:1},8,["disabled"]),u(p,{class:"mx-2",to:`/stories/${c.value}`,color:"primary"},{default:n(()=>[i("回故事頁")]),_:1},8,["to"]),u(p,{class:"mx-2",onClick:t[1]||(t[1]=w=>m(1)),disabled:!I.value},{default:n(()=>[i("下一章")]),_:1},8,["disabled"])])]}),_:1}))}},U=B(T,[["__scopeId","data-v-2a8d0c43"]]);export{U as default};
