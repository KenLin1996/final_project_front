import{Q as H,R as s,S as f,T as t,c as e,a7 as M,a8 as j,W as l,_ as u,V as P,a4 as i,a9 as z,aa as W,M as Y,x as d,A as q,ab as Q,X as c,a1 as X,a3 as Z,U as T,Y as g,Z as y,ac as J,P as K,G as v,$ as O}from"./index-D7Ak4P4d.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as te}from"./VChip-DHYB_887.js";import{m as D,S as I}from"./StoryItem-0zrn_uJm.js";import{V as p,a as o}from"./VRow-D61Wexp4.js";import{V as b}from"./VContainer-D_j6Yqpc.js";import{V as h}from"./VDivider-C137Yh-_.js";import{V as ae,a as se,b as oe}from"./VList-DdlcFOqs.js";import"./VSlideGroup-C-eF75Vm.js";import"./vee-validate.esm-n0mYqsAE.js";import"./VMenu-Cm7ojpY7.js";import"./VTextarea-C_1aVLGw.js";const le={class:"d-flex justify-space-between align-center my-2"},re={__name:"BookCard",props:["_id","image","title","category","mainAuthor","content","chapterName"],setup(r){return(k,_)=>{const V=H("router-link");return s(),f(V,{to:"/stories/"+r._id,style:{"text-decoration":"none"}},{default:t(()=>[e(M,{class:"pa-3 customMargin h-100 me-2 pa-4 rounded-lg",width:"220",style:{"box-shadow":"0 2px 4px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.15)"}},{default:t(()=>[e(j,{class:"pa-0 mb-2 cursor-pointer",style:{"font-size":"12px",color:"#4e9194"}},{default:t(()=>{var m;return[l(u((m=r.mainAuthor)==null?void 0:m.username),1)]}),_:1}),e(P,{class:"cursor-pointer rounded-lg",height:"160px",src:r.image,cover:"",style:{"box-shadow":"0 2px 4px rgba(0, 0, 0, 0.2)"}},null,8,["src"]),i("div",le,[e(z,{class:"pa-0 text-subtitle-1 cursor-pointer",style:{width:"130px"}},{default:t(()=>[l(u(r.title),1)]),_:1}),e(te,{density:"compact",color:"primary",label:"",style:{"font-size":"12px",padding:"2px 6px"}},{default:t(()=>[l(u(r.category),1)]),_:1})]),e(W,{class:"pa-0"},{default:t(()=>[l(u(r.content[r.content.length-1].chapterName),1)]),_:1}),e(j,{class:"pa-0 ellipsis-3-lines"},{default:t(()=>[l(u(r.content[0].content[0]),1)]),_:1})]),_:1})]),_:1},8,["to"])}}},L=ee(re,[["__scopeId","data-v-eade7f3b"]]),ne={class:"pa-0 px-4"},ce=i("h2",null,"收藏故事",-1),ue=i("h2",null,"熱門故事",-1),ie=i("h2",null,"最新故事",-1),de=i("h2",null,"完結故事",-1),pe={key:1,class:""},fe=i("h2",null,"創作資源區",-1),Ce={__name:"index",setup(r){const k=Y(),{api:_,apiAuth:V}=J(),m=K(),U=()=>{k.isLogin?m.push("/createStory"):m.push("/login")},E=d([]),B=d([]),A=d([]),N=d([]),S=d([]),C=d(null),$=n=>{C.value=C.value===n?null:n},x=async()=>{try{const{data:n}=await _.get("/story");E.value=n.result.data;const R=await _.get("/story/getPopularStories");A.value=R.data.result.data;const a=await _.get("/story/getNewestStories");N.value=a.data.result.data;const w=await _.get("/story/getCompletedStories");S.value=w.data.result.data;const G=await V.get("/story/getBookmarkStories");B.value=G.data.result.data}catch(n){console.error("Failed to load stories:",n)}},F=[{to:"/articleArea",icon:"mdi-lightbulb-on-outline",title:"創作指引",color:"#F9A825"}];return q(()=>{x(),D.on("updateStory",x)}),Q(()=>{D.off("updateStory",x)}),(n,R)=>(s(),c("div",null,[e(p,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(M,{class:"rounded-0 px-10 py-auto",height:"200px",color:"surface-variant",image:"https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2948&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",cover:"",elevation:"5"},{default:t(()=>[e(o,null,{default:t(()=>[e(z,{class:"text-h4 font-weight-bold"},{default:t(()=>[l(" 歡迎來到界筆！ ")]),_:1}),e(j,{class:"font-weight-bold pa-0 py-2 px-4 mb-2",style:{"font-size":"24px","letter-spacing":"12px"}},{default:t(()=>[l(" 探索和創作無限可能的故事 ")]),_:1}),i("div",ne,[e(T,{class:"font-weight-black mr-3 px-4",variant:"elevated",color:"#CCB78E",onClick:U,to:"/createStory"},{default:t(()=>[l(" 立即創作 ")]),_:1}),e(T,{class:"font-weight-black px-4",outlined:"",border:"",variant:"elevated",style:{color:"#ccb78e",border:"1px solid #ccb78e","background-color":"rgba(0, 0, 0, 0.47)"},to:"/category"},{default:t(()=>[l(" 探索故事 ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),X(k).isLogin?(s(),f(b,{key:0,style:{padding:"32px"}},{default:t(()=>[e(p,{class:"justify-space-between"},{default:t(()=>[e(o,{cols:"12",class:"pb-0"},{default:t(()=>[ce]),_:1}),e(h,{class:"mb-3"}),e(o,{cols:"12",class:"d-flex flex-column justify-space-between"},{default:t(()=>[(s(!0),c(g,null,y(B.value,a=>(s(),f(I,v({key:a._id,ref_for:!0},a,{isExpanded:C.value===a._id,onToggle:w=>$(a._id),onUpdate:x}),null,16,["isExpanded","onToggle"]))),128))]),_:1})]),_:1})]),_:1})):Z("",!0),e(b,{style:{padding:"32px"}},{default:t(()=>[e(p,{class:"justify-space-between"},{default:t(()=>[e(o,{cols:"12",class:"pb-0"},{default:t(()=>[ue]),_:1}),e(h,{class:"mb-3"}),e(o,{cols:"12",class:"d-flex flex-row justify-start"},{default:t(()=>[(s(!0),c(g,null,y(A.value,a=>(s(),f(L,v({key:a._id,ref_for:!0},a),null,16))),128))]),_:1})]),_:1})]),_:1}),e(b,{style:{padding:"32px"}},{default:t(()=>[e(p,{class:"justify-space-between"},{default:t(()=>[e(o,{cols:"12",class:"pb-0"},{default:t(()=>[ie]),_:1}),e(h,{class:"mb-3"}),e(o,{cols:"12",class:"d-flex flex-column justify-space-between"},{default:t(()=>[(s(!0),c(g,null,y(N.value,a=>(s(),f(I,v({key:a._id,ref_for:!0},a,{onUpdate:x}),null,16))),128))]),_:1})]),_:1})]),_:1}),e(b,{style:{padding:"32px"}},{default:t(()=>[e(p,{class:"justify-space-between"},{default:t(()=>[e(o,{cols:"12",class:"pb-0"},{default:t(()=>[de]),_:1}),e(h,{class:"mb-3"}),e(o,{cols:"12",class:"d-flex flex-row justify-space-between"},{default:t(()=>[S.value.length>0?(s(!0),c(g,{key:0},y(S.value,a=>(s(),f(L,v({key:a._id,ref_for:!0},a),null,16))),128)):(s(),c("div",pe,"尚未有已完結故事"))]),_:1})]),_:1})]),_:1}),e(b,{style:{padding:"32px"}},{default:t(()=>[e(p,{class:"justify-space-between"},{default:t(()=>[e(o,{cols:"12",class:"pb-0"},{default:t(()=>[fe]),_:1}),e(h,{class:"mb-3"}),e(o,{cols:"12",class:"d-flex flex-row justify-space-between py-0"},{default:t(()=>[e(ae,{class:"d-flex justify-space-between w-100 py-0",style:{"background-color":"transparent"}},{default:t(()=>[(s(),c(g,null,y(F,(a,w)=>e(se,{key:w,to:a.to,link:""},{prepend:t(()=>[e(O,{size:"80",color:a.color},{default:t(()=>[l(u(a.icon),1)]),_:2},1032,["color"])]),default:t(()=>[e(oe,{style:{"font-size":"20px","font-weight":"bold"},textContent:u(a.title)},null,8,["textContent"])]),_:2},1032,["to"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{Ce as default};
