import{M as R,N as S,x as U,Q as C,R as T,S as P,T as o,P as D,c as e,V as j,U as r,W as n,a1 as t,ap as F,ad as p}from"./index-Au6ub0me.js";import{c as M,b as f,u as B,f as g,V as L}from"./vee-validate.esm-Dm184EN-.js";import{v as N}from"./index-BTtYd8RN.js";import{V as v}from"./VContainer-kuu0p244.js";import{V as O,a as _}from"./VRow-DKywWreQ.js";import{V as $}from"./VDivider-D4FJUnba.js";var b={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API:"https://back-txvy.onrender.com"};const J={__name:"login",setup(A){const V=D(),y=R(),d=S(),x=M({email:f().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",l=>N.isEmail(l)),password:f().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),s=U(!1),h=()=>{s.value=!s.value},{handleSubmit:w,isSubmitting:m}=B({validationSchema:x}),i=g("email"),c=g("password"),k=w(async l=>{const a=await y.login(l);a==="登入成功"?(d({text:a,snackbarProps:{color:"green"}}),V.push("/")):d({text:a,snackbarProps:{color:"red"}})}),E=()=>{const l=b.VITE_REDIRECT_URI;console.log("Redirect URI:",l);const a=`https://accounts.google.com/o/oauth2/auth?client_id=${b.VITE_GOOGLE_CLIENT_ID}&redirect_uri=${l}&scope=email profile&response_type=token`;window.location.href=a};return(l,a)=>{const I=C("router-link");return T(),P(v,{class:"d-flex align-center justify-center h-100 mt-0 mb-0",fluid:""},{default:o(()=>[e(v,{class:"text-center pa-8 rounded-lg elevation-4",style:{width:"500px","background-color":"white",border:"1px solid rgba(255, 255, 255, 0.1)"}},{default:o(()=>[e(O,{class:"d-flex flex-column justify-center"},{default:o(()=>[e(_,{class:"d-flex flex-column justify-center align-center my-2"},{default:o(()=>[e(I,{to:"/"},{default:o(()=>[e(j,{class:"my-4",width:100,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1}),e(r,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"my-2 elevation-1 w-66 h-25",variant:"plain",to:"/externalAuth/google",onClick:E},{default:o(()=>[n(" 使用 Google 登入 ")]),_:1}),e(r,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000",size:"default","prepend-icon":"mdi-facebook",class:"my-2 elevation-1 w-66 h-25",variant:"plain",to:"/login"},{default:o(()=>[n(" 使用 Facebook 登入 ")]),_:1})]),_:1}),e($,{class:"my-2"}),e(_,{cols:"12"},{default:o(()=>[e(L,{disabled:t(m),onSubmit:F(t(k),["prevent"])},{default:o(()=>[e(p,{label:"信箱",type:"email",modelValue:t(i).value.value,"onUpdate:modelValue":a[0]||(a[0]=u=>t(i).value.value=u),"error-messages":t(i).errorMessage.value,autocomplete:"email"},null,8,["modelValue","error-messages"]),e(p,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:s.value?"text":"password",modelValue:t(c).value.value,"onUpdate:modelValue":a[1]||(a[1]=u=>t(c).value.value=u),"error-messages":t(c).errorMessage.value,"append-inner-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":h,autocomplete:"current-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),e(r,{type:"submit",outlined:"",border:"",style:{"background-color":"#f4b942","font-weight":"bold","font-size":"16px"},class:"my-4 elevation-1 w-33",loading:t(m)},{default:o(()=>[n(" 登入 ")]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"]),e(r,{class:"",ripple:!1,variant:"plain",to:"/register"},{default:o(()=>[n(" 註冊 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{J as default};
