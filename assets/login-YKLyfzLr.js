import{M as C,N as j,x as P,Q as F,R as M,S as U,T as a,P as B,c as e,V as N,U as u,W as d,a1 as o,ap as R,ad as p}from"./index-DZH1FvPX.js";import{c as T,b as f,u as q,f as g,V as A}from"./vee-validate.esm-C5MipkAk.js";import{v as E}from"./index-CcuJMjLW.js";import{V as v}from"./VContainer-Dm3Q9-rI.js";import{V as I,a as b}from"./VRow-wS-hPdtk.js";import{V as $}from"./VDivider-Cn5E2RE9.js";const J={__name:"login",setup(z){const x=B(),V=C(),c=j(),y=T({email:f().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",l=>E.isEmail(l)),password:f().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),s=P(!1),w=()=>{s.value=!s.value},{handleSubmit:h,isSubmitting:m}=q({validationSchema:y}),r=g("email"),n=g("password"),_=h(async l=>{const t=await V.login(l);t==="登入成功"?(c({text:t,snackbarProps:{color:"green"}}),x.push("/")):c({text:t,snackbarProps:{color:"red"}})}),k=async()=>{window.location.href="http://localhost:4000/externalAuth/google"};return(l,t)=>{const S=F("router-link");return M(),U(v,{class:"d-flex align-center justify-center h-100 mt-0 mb-0",fluid:""},{default:a(()=>[e(v,{class:"text-center pa-8 rounded-lg elevation-4",style:{width:"500px","background-color":"white",border:"1px solid rgba(255, 255, 255, 0.1)"}},{default:a(()=>[e(I,{class:"d-flex flex-column justify-center"},{default:a(()=>[e(b,{class:"d-flex flex-column justify-center align-center my-2"},{default:a(()=>[e(S,{to:"/"},{default:a(()=>[e(N,{class:"my-4",width:100,"aspect-ratio":"1/1",cover:"",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"})]),_:1}),e(u,{outlined:"",border:"",style:{"background-color":"#ffffff"},color:"#000000","prepend-icon":"mdi-google",class:"my-2 elevation-1 w-66 h-25",variant:"plain",to:"/externalAuth/google",onClick:k},{default:a(()=>[d(" 使用 Google 登入 ")]),_:1})]),_:1}),e($,{class:"my-2"}),e(b,{cols:"12"},{default:a(()=>[e(A,{disabled:o(m),onSubmit:R(o(_),["prevent"])},{default:a(()=>[e(p,{label:"信箱",type:"email",modelValue:o(r).value.value,"onUpdate:modelValue":t[0]||(t[0]=i=>o(r).value.value=i),"error-messages":o(r).errorMessage.value,autocomplete:"email"},null,8,["modelValue","error-messages"]),e(p,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:s.value?"text":"password",modelValue:o(n).value.value,"onUpdate:modelValue":t[1]||(t[1]=i=>o(n).value.value=i),"error-messages":o(n).errorMessage.value,"append-inner-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":w,autocomplete:"current-password"},null,8,["type","modelValue","error-messages","append-inner-icon"]),e(u,{type:"submit",outlined:"",border:"",style:{"background-color":"#f4b942","font-weight":"bold","font-size":"16px"},class:"my-4 elevation-1 w-33",loading:o(m)},{default:a(()=>[d(" 登入 ")]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"]),e(u,{class:"",ripple:!1,variant:"plain",to:"/register"},{default:a(()=>[d(" 註冊 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{J as default};
